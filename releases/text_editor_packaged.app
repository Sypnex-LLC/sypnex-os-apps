{
  "app_metadata": {
    "id": "text_editor",
    "name": "Text Editor",
    "description": "A simple text editor for creating and editing text files in the virtual file system",
    "icon": "fas fa-edit",
    "keywords": [
      "text",
      "editor",
      "file",
      "edit",
      "write"
    ],
    "author": "Sypnex OS",
    "version": "1.0.3",
    "type": "user_app",
    "scripts": [
      "js/utils.js",
      "js/settings-manager.js",
      "js/file-manager.js",
      "js/editor-manager.js",
      "js/syntax-highlighting.js",
      "js/code-validation.js",
      "js/terminal-manager.js",
      "js/ui-manager.js",
      "js/main.js"
    ],
    "settings": [
      {
        "key": "AUTO_SAVE_INTERVAL",
        "name": "Auto Save Interval (s)",
        "type": "number",
        "value": 30,
        "description": "Auto save content every N seconds (0 = disabled)"
      },
      {
        "key": "FONT_SIZE",
        "name": "Font Size",
        "type": "number",
        "value": 14,
        "description": "Text editor font size in pixels"
      },
      {
        "key": "TAB_SIZE",
        "name": "Tab Size",
        "type": "number",
        "value": 4,
        "description": "Number of spaces for tab indentation"
      },
      {
        "key": "TERMINAL_ENABLED",
        "name": "Integrated Terminal",
        "type": "boolean",
        "value": false,
        "description": "Show integrated terminal by default"
      }
    ]
  },
  "files": {
    "text_editor.app": "ew0KICAgICJpZCI6ICJ0ZXh0X2VkaXRvciIsDQogICAgIm5hbWUiOiAiVGV4dCBFZGl0b3IiLA0KICAgICJkZXNjcmlwdGlvbiI6ICJBIHNpbXBsZSB0ZXh0IGVkaXRvciBmb3IgY3JlYXRpbmcgYW5kIGVkaXRpbmcgdGV4dCBmaWxlcyBpbiB0aGUgdmlydHVhbCBmaWxlIHN5c3RlbSIsDQogICAgImljb24iOiAiZmFzIGZhLWVkaXQiLA0KICAgICJrZXl3b3JkcyI6IFsidGV4dCIsICJlZGl0b3IiLCAiZmlsZSIsICJlZGl0IiwgIndyaXRlIl0sDQogICAgImF1dGhvciI6ICJTeXBuZXggT1MiLA0KICAgICJ2ZXJzaW9uIjogIjEuMC4zIiwNCiAgICAidHlwZSI6ICJ1c2VyX2FwcCIsDQogICAgInNjcmlwdHMiOiBbDQogICAgICAgICJqcy91dGlscy5qcyIsDQogICAgICAgICJqcy9zZXR0aW5ncy1tYW5hZ2VyLmpzIiwNCiAgICAgICAgImpzL2ZpbGUtbWFuYWdlci5qcyIsDQogICAgICAgICJqcy9lZGl0b3ItbWFuYWdlci5qcyIsDQogICAgICAgICJqcy9zeW50YXgtaGlnaGxpZ2h0aW5nLmpzIiwNCiAgICAgICAgImpzL2NvZGUtdmFsaWRhdGlvbi5qcyIsIA0KICAgICAgICAianMvdGVybWluYWwtbWFuYWdlci5qcyIsDQogICAgICAgICJqcy91aS1tYW5hZ2VyLmpzIiwNCiAgICAgICAgImpzL21haW4uanMiDQogICAgXSwNCiAgICAic2V0dGluZ3MiOiBbDQogICAgICAgIHsNCiAgICAgICAgICAgICJrZXkiOiAiQVVUT19TQVZFX0lOVEVSVkFMIiwNCiAgICAgICAgICAgICJuYW1lIjogIkF1dG8gU2F2ZSBJbnRlcnZhbCAocykiLA0KICAgICAgICAgICAgInR5cGUiOiAibnVtYmVyIiwNCiAgICAgICAgICAgICJ2YWx1ZSI6IDMwLA0KICAgICAgICAgICAgImRlc2NyaXB0aW9uIjogIkF1dG8gc2F2ZSBjb250ZW50IGV2ZXJ5IE4gc2Vjb25kcyAoMCA9IGRpc2FibGVkKSINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgICAgImtleSI6ICJGT05UX1NJWkUiLA0KICAgICAgICAgICAgIm5hbWUiOiAiRm9udCBTaXplIiwNCiAgICAgICAgICAgICJ0eXBlIjogIm51bWJlciIsDQogICAgICAgICAgICAidmFsdWUiOiAxNCwNCiAgICAgICAgICAgICJkZXNjcmlwdGlvbiI6ICJUZXh0IGVkaXRvciBmb250IHNpemUgaW4gcGl4ZWxzIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgICAia2V5IjogIlRBQl9TSVpFIiwNCiAgICAgICAgICAgICJuYW1lIjogIlRhYiBTaXplIiwNCiAgICAgICAgICAgICJ0eXBlIjogIm51bWJlciIsDQogICAgICAgICAgICAidmFsdWUiOiA0LA0KICAgICAgICAgICAgImRlc2NyaXB0aW9uIjogIk51bWJlciBvZiBzcGFjZXMgZm9yIHRhYiBpbmRlbnRhdGlvbiINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgICAgImtleSI6ICJURVJNSU5BTF9FTkFCTEVEIiwNCiAgICAgICAgICAgICJuYW1lIjogIkludGVncmF0ZWQgVGVybWluYWwiLA0KICAgICAgICAgICAgInR5cGUiOiAiYm9vbGVhbiIsDQogICAgICAgICAgICAidmFsdWUiOiBmYWxzZSwNCiAgICAgICAgICAgICJkZXNjcmlwdGlvbiI6ICJTaG93IGludGVncmF0ZWQgdGVybWluYWwgYnkgZGVmYXVsdCINCiAgICAgICAgfQ0KICAgIF0NCn0g",
    "text_editor.html": "PGRpdiBjbGFzcz0iYXBwLWNvbnRhaW5lciI+DQogICAgPGRpdiBjbGFzcz0iYXBwLWhlYWRlciI+DQogICAgICAgIDxoMj48aSBjbGFzcz0iZmFzIGZhLWVkaXQiPjwvaT4gVGV4dCBFZGl0b3IgLSA8c3BhbiBpZD0iY3VycmVudC1maWxlbmFtZSI+dW50aXRsZWQudHh0PC9zcGFuPjwvaDI+DQogICAgICAgIDxwPkNyZWF0ZSBhbmQgZWRpdCB0ZXh0IGZpbGVzIGluIHRoZSB2aXJ0dWFsIGZpbGUgc3lzdGVtPC9wPg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBjbGFzcz0iYXBwLWNvbnRlbnQiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJhcHAtdG9vbGJhciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJhcHAtYnRuLWdyb3VwIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJuZXctZmlsZSIgY2xhc3M9ImFwcC1idG4gcHJpbWFyeSI+DQogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtZmlsZSI+PC9pPiBOZXcNCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJsb2FkLWZpbGUiIGNsYXNzPSJhcHAtYnRuIHNlY29uZGFyeSI+DQogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtZm9sZGVyLW9wZW4iPjwvaT4gTG9hZA0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNhdmUtZmlsZSIgY2xhc3M9ImFwcC1idG4gcHJpbWFyeSI+DQogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtc2F2ZSI+PC9pPiBTYXZlDQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ic2F2ZS1hcy1maWxlIiBjbGFzcz0iYXBwLWJ0biBzZWNvbmRhcnkiPg0KICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLXNhdmUiPjwvaT4gU2F2ZSBBcw0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICANCg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJhcHAtYnRuLWdyb3VwIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJ3b3JkLXdyYXAtdG9nZ2xlIiBjbGFzcz0iYXBwLWJ0biBzZWNvbmRhcnkiPg0KICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLXRleHQtd2lkdGgiPjwvaT4gV29yZCBXcmFwDQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ibGluZS1udW1iZXJzLXRvZ2dsZSIgY2xhc3M9ImFwcC1idG4gc2Vjb25kYXJ5Ij4NCiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+IExpbmUgTnVtYmVycw0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InN5bnRheC1oaWdobGlnaHRpbmctdG9nZ2xlIiBjbGFzcz0iYXBwLWJ0biBzZWNvbmRhcnkiPg0KICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWNvZGUiPjwvaT4gU3ludGF4IEhpZ2hsaWdodGluZw0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InZhbGlkYXRpb24tdG9nZ2xlIiBjbGFzcz0iYXBwLWJ0biBzZWNvbmRhcnkiPg0KICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWNoZWNrLWNpcmNsZSI+PC9pPiBDb2RlIFZhbGlkYXRpb24NCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJ0ZXJtaW5hbC10b2dnbGUiIGNsYXNzPSJhcHAtYnRuIHNlY29uZGFyeSI+DQogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtdGVybWluYWwiPjwvaT4gVGVybWluYWwNCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJlZGl0b3ItY29udGFpbmVyIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVkaXRvci13cmFwcGVyIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJsaW5lLW51bWJlcnMiIGNsYXNzPSJsaW5lLW51bWJlcnMiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0idGV4dC1lZGl0b3IiIGNsYXNzPSJhcHAtdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSJTdGFydCB0eXBpbmcgeW91ciB0ZXh0IGhlcmUuLi4iPjwvdGV4dGFyZWE+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPCEtLSBJbnRlZ3JhdGVkIFRlcm1pbmFsIC0tPg0KICAgICAgICA8ZGl2IGlkPSJpbnRlZ3JhdGVkLXRlcm1pbmFsIiBjbGFzcz0iaW50ZWdyYXRlZC10ZXJtaW5hbCBoaWRkZW4iPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0idGVybWluYWwtaGVhZGVyIj4NCiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGVybWluYWwtdGl0bGUiPkludGVncmF0ZWQgVGVybWluYWw8L3NwYW4+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0idGVybWluYWwtcmVzaXplIiBjbGFzcz0idGVybWluYWwtcmVzaXplLWJ0biI+DQogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtZ3JpcC1saW5lcyI+PC9pPg0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXJtaW5hbC1vdXRwdXQiIGlkPSJ0ZXJtaW5hbE91dHB1dCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGVybWluYWwtbGluZSB0ZXJtaW5hbC1pbmZvIj4NCiAgICAgICAgICAgICAgICAgICAgSW50ZWdyYXRlZCBUZXJtaW5hbCAtIFR5cGUgY29tbWFuZHMgdG8gZXhlY3V0ZQ0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRlcm1pbmFsLWxpbmUiPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXJtaW5hbC1pbnB1dC1jb250YWluZXIiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRlcm1pbmFsLWlucHV0LWxpbmUiPg0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGVybWluYWwtcHJvbXB0Ij4kPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9InRlcm1pbmFsLWlucHV0IiBpZD0idGVybWluYWxJbnB1dCIgcGxhY2Vob2xkZXI9IkVudGVyIGNvbW1hbmQuLi4iIGF1dG9jb21wbGV0ZT0ib2ZmIj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJlZGl0b3Itc3RhdHVzIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXR1cy1pdGVtIj4NCiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3RhdHVzLWxhYmVsIj5Nb2RpZmllZDo8L3NwYW4+DQogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InN0YXR1cy12YWx1ZSIgaWQ9Im1vZGlmaWVkLXN0YXR1cyI+Tm88L3NwYW4+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXR1cy1pdGVtIj4NCiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3RhdHVzLWxhYmVsIj5FcnJvcnM6PC9zcGFuPg0KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzdGF0dXMtdmFsdWUiIGlkPSJlcnJvci1jb3VudCI+MDwvc3Bhbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCjwvZGl2PiANCjxzdHlsZT4vKiA9PT09PSBTdHlsZTogc3R5bGUuY3NzID09PT09ICovDQovKiBUZXh0IEVkaXRvciBBcHAgU3R5bGVzICovDQoNCi8qIEFwcCBDb250YWluZXIgKi8NCi5hcHAtY29udGFpbmVyIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIG1pbi1oZWlnaHQ6IDA7DQp9DQoNCi5hcHAtY29udGVudCB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgIGZsZXg6IDE7DQogICAgbWluLWhlaWdodDogMDsNCn0NCg0KLyogRWRpdG9yIENvbnRhaW5lciAqLw0KLmVkaXRvci1jb250YWluZXIgew0KICAgIGZsZXg6IDE7DQogICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1iZyk7DQogICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsNCiAgICBib3JkZXItcmFkaXVzOiA2cHg7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICBtYXJnaW46IDE1cHggMDsNCiAgICBtaW4taGVpZ2h0OiAyMDBweDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQp9DQoNCi5lZGl0b3Itd3JhcHBlciB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4OiAxOw0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBoZWlnaHQ6IDEwMCU7DQp9DQoNCi8qIExpbmUgTnVtYmVycyAqLw0KLmxpbmUtbnVtYmVycyB7DQogICAgYmFja2dyb3VuZDogdmFyKC0tZ2xhc3MtYmcpOw0KICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7DQogICAgcGFkZGluZzogMTBweCA4cHg7DQogICAgZm9udC1mYW1pbHk6ICdTRiBNb25vJywgTW9uYWNvLCAnQ2FzY2FkaWEgQ29kZScsIG1vbm9zcGFjZTsNCiAgICBmb250LXNpemU6IDE0cHg7IC8qIE1hdGNoIGVkaXRvciBmb250IHNpemUgKi8NCiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7DQogICAgdGV4dC1hbGlnbjogcmlnaHQ7DQogICAgbWluLXdpZHRoOiA1MHB4Ow0KICAgIHVzZXItc2VsZWN0OiBub25lOw0KICAgIG92ZXJmbG93LXk6IGhpZGRlbjsNCiAgICBsaW5lLWhlaWdodDogMS42OyAvKiBNYXRjaCBlZGl0b3IgbGluZSBoZWlnaHQgKi8NCiAgICBmbGV4LXNocmluazogMDsNCn0NCg0KLmxpbmUtbnVtYmVycy5oaWRkZW4gew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi5saW5lLW51bWJlciB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgcGFkZGluZzogMCA0cHg7DQp9DQoNCi8qIFRleHQgRWRpdG9yICovDQojdGV4dC1lZGl0b3Igew0KICAgIGZsZXg6IDE7DQogICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1iZyk7DQogICAgYm9yZGVyOiBub25lOw0KICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOw0KICAgIGZvbnQtZmFtaWx5OiAnU0YgTW9ubycsIE1vbmFjbywgJ0Nhc2NhZGlhIENvZGUnLCBtb25vc3BhY2U7DQogICAgZm9udC1zaXplOiAxNHB4Ow0KICAgIGxpbmUtaGVpZ2h0OiAxLjY7DQogICAgcGFkZGluZzogMTBweCAxNXB4Ow0KICAgIHJlc2l6ZTogbm9uZTsNCiAgICBvdXRsaW5lOiBub25lOw0KICAgIG92ZXJmbG93LXk6IGF1dG87DQogICAgb3ZlcmZsb3cteDogYXV0bzsNCiAgICB3aGl0ZS1zcGFjZTogcHJlOw0KICAgIHRhYi1zaXplOiA0Ow0KICAgIGhlaWdodDogMTAwJTsNCiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KDQojdGV4dC1lZGl0b3Iud29yZC13cmFwIHsNCiAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7DQogICAgd29yZC13cmFwOiBicmVhay13b3JkOw0KfQ0KDQojdGV4dC1lZGl0b3I6OnBsYWNlaG9sZGVyIHsNCiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7DQp9DQoNCi8qIFN5bnRheCBIaWdobGlnaHRpbmcgRWRpdG9yICovDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIHsNCiAgICBmbGV4OiAxOw0KICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnktYmcpOw0KICAgIGJvcmRlcjogbm9uZTsNCiAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsNCiAgICBmb250LWZhbWlseTogJ1NGIE1vbm8nLCBNb25hY28sICdDYXNjYWRpYSBDb2RlJywgbW9ub3NwYWNlOw0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICBsaW5lLWhlaWdodDogMS42Ow0KICAgIHBhZGRpbmc6IDEwcHggMTVweDsNCiAgICBvdXRsaW5lOiBub25lOw0KICAgIG92ZXJmbG93LXk6IGF1dG87DQogICAgb3ZlcmZsb3cteDogYXV0bzsNCiAgICB3aGl0ZS1zcGFjZTogcHJlOw0KICAgIHRhYi1zaXplOiA0Ow0KICAgIGhlaWdodDogMTAwJTsNCiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCg0KLmhpZ2hsaWdodGVkLWVkaXRvcjpmb2N1cyB7DQogICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1iZyk7DQp9DQoNCi8qIFByaXNtLmpzIFRoZW1lIE92ZXJyaWRlcyBmb3IgYmV0dGVyIGludGVncmF0aW9uICovDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5jb21tZW50LA0KLmhpZ2hsaWdodGVkLWVkaXRvciAudG9rZW4ucHJvbG9nLA0KLmhpZ2hsaWdodGVkLWVkaXRvciAudG9rZW4uZG9jdHlwZSwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLmNkYXRhIHsNCiAgICBjb2xvcjogIzZhNzM3ZDsNCn0NCg0KLmhpZ2hsaWdodGVkLWVkaXRvciAudG9rZW4ucHVuY3R1YXRpb24gew0KICAgIGNvbG9yOiAjZTFlNGU4Ow0KfQ0KDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5wcm9wZXJ0eSwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLnRhZywNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLmJvb2xlYW4sDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5udW1iZXIsDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5jb25zdGFudCwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLnN5bWJvbCwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLmRlbGV0ZWQgew0KICAgIGNvbG9yOiAjNzliOGZmOw0KfQ0KDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5zZWxlY3RvciwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLmF0dHItbmFtZSwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLnN0cmluZywNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLmNoYXIsDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5idWlsdGluLA0KLmhpZ2hsaWdodGVkLWVkaXRvciAudG9rZW4uaW5zZXJ0ZWQgew0KICAgIGNvbG9yOiAjODVlODlkOw0KfQ0KDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5vcGVyYXRvciwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLmVudGl0eSwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLnVybCwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLmxhbmd1YWdlLWNzcyAudG9rZW4uc3RyaW5nLA0KLmhpZ2hsaWdodGVkLWVkaXRvciAuc3R5bGUgLnRva2VuLnN0cmluZyB7DQogICAgY29sb3I6ICNmOTc1ODM7DQp9DQoNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLmF0cnVsZSwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLmF0dHItdmFsdWUsDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5rZXl3b3JkIHsNCiAgICBjb2xvcjogI2Y5NzU4MzsNCn0NCg0KLmhpZ2hsaWdodGVkLWVkaXRvciAudG9rZW4uZnVuY3Rpb24sDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5jbGFzcy1uYW1lIHsNCiAgICBjb2xvcjogI2IzOTJmMDsNCn0NCg0KLmhpZ2hsaWdodGVkLWVkaXRvciAudG9rZW4ucmVnZXgsDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5pbXBvcnRhbnQsDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi52YXJpYWJsZSB7DQogICAgY29sb3I6ICNmZmFiNzA7DQp9DQoNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLmltcG9ydGFudCwNCi5oaWdobGlnaHRlZC1lZGl0b3IgLnRva2VuLmJvbGQgew0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KDQouaGlnaGxpZ2h0ZWQtZWRpdG9yIC50b2tlbi5pdGFsaWMgew0KICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCn0NCg0KLmhpZ2hsaWdodGVkLWVkaXRvciAudG9rZW4uZW50aXR5IHsNCiAgICBjdXJzb3I6IGhlbHA7DQp9DQoNCi8qIEVkaXRvciBTdGF0dXMgQmFyICovDQouZWRpdG9yLXN0YXR1cyB7DQogICAgZGlzcGxheTogZmxleDsgLyogQ2hhbmdlZCBmcm9tIG5vbmUgdG8gZmxleCB0byBzaG93IHN0YXR1cyBiYXIgKi8NCiAgICBnYXA6IDIwcHg7DQogICAgcGFkZGluZzogMTBweCAxNXB4Ow0KICAgIGJhY2tncm91bmQ6IHZhcigtLWdsYXNzLWJnKTsNCiAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsNCiAgICBmb250LXNpemU6IDEycHg7DQogICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsNCiAgICBmbGV4LXNocmluazogMDsNCn0NCg0KLnN0YXR1cy1pdGVtIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGdhcDogNXB4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQp9DQoNCi5zdGF0dXMtbGFiZWwgew0KICAgIGZvbnQtd2VpZ2h0OiA1MDA7DQp9DQoNCi5zdGF0dXMtdmFsdWUgew0KICAgIGNvbG9yOiB2YXIoLS1hY2NlbnQtY29sb3IpOw0KICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQp9DQoNCi8qIEZpbGUgUGF0aCBEaXNwbGF5ICovDQouZmlsZS1wYXRoLWRpc3BsYXkgew0KICAgIGJhY2tncm91bmQ6IHZhcigtLWdsYXNzLWJnKTsNCiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1nbGFzcy1ib3JkZXIpOw0KICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICBwYWRkaW5nOiAxMHB4IDE1cHg7DQogICAgbWluLXdpZHRoOiAyMDBweDsNCiAgICBmb250LWZhbWlseTogJ1NGIE1vbm8nLCBNb25hY28sICdDYXNjYWRpYSBDb2RlJywgbW9ub3NwYWNlOw0KICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOw0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7DQp9DQoNCi8qIEludGVncmF0ZWQgVGVybWluYWwgU3R5bGVzICovDQouaW50ZWdyYXRlZC10ZXJtaW5hbCB7DQogICAgYmFja2dyb3VuZDogIzFlMWUxZTsNCiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOw0KICAgIGJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOyAvKiBSb3VuZGVkIHRvcCBjb3JuZXJzIG9ubHkgKi8NCiAgICBtYXJnaW46IDEwcHggMCAwIDA7IC8qIE5vIGJvdHRvbSBtYXJnaW4gdG8gc2l0IGZsdXNoICovDQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgIG1pbi1oZWlnaHQ6IDIwMHB4Ow0KICAgIG1heC1oZWlnaHQ6IDQwMHB4Ow0KICAgIG92ZXJmbG93OiBoaWRkZW47DQp9DQoNCi5pbnRlZ3JhdGVkLXRlcm1pbmFsLmhpZGRlbiB7DQogICAgZGlzcGxheTogbm9uZTsNCn0NCg0KLnRlcm1pbmFsLWhlYWRlciB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBwYWRkaW5nOiA4cHggMTJweDsNCiAgICBiYWNrZ3JvdW5kOiAjMmQyZDJkOw0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNDQ0Ow0KICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICBjb2xvcjogI2ZmZmZmZjsNCn0NCg0KLnRlcm1pbmFsLXRpdGxlIHsNCiAgICBmb250LXdlaWdodDogNTAwOw0KfQ0KDQoudGVybWluYWwtcmVzaXplLWJ0biB7DQogICAgYmFja2dyb3VuZDogbm9uZTsNCiAgICBib3JkZXI6IG5vbmU7DQogICAgY29sb3I6ICM4ODg7DQogICAgY3Vyc29yOiBucy1yZXNpemU7DQogICAgcGFkZGluZzogNHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDNweDsNCn0NCg0KLnRlcm1pbmFsLXJlc2l6ZS1idG46aG92ZXIgew0KICAgIGJhY2tncm91bmQ6ICM0NDQ7DQogICAgY29sb3I6ICNmZmZmZmY7DQp9DQoNCi50ZXJtaW5hbC1vdXRwdXQgew0KICAgIGZsZXg6IDE7DQogICAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUxZTsNCiAgICBjb2xvcjogI2ZmZmZmZjsNCiAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOw0KICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICBvdmVyZmxvdy15OiBhdXRvOw0KICAgIHBhZGRpbmc6IDhweCAxMnB4Ow0KICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsNCiAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7DQogICAgbWluLWhlaWdodDogMTAwcHg7DQogICAgbWF4LWhlaWdodDogMjAwcHg7DQp9DQoNCi50ZXJtaW5hbC1saW5lIHsNCiAgICBtYXJnaW46IDFweCAwOw0KICAgIGxpbmUtaGVpZ2h0OiAxLjM7DQogICAgdXNlci1zZWxlY3Q6IHRleHQ7DQogICAgLXdlYmtpdC11c2VyLXNlbGVjdDogdGV4dDsNCiAgICAtbW96LXVzZXItc2VsZWN0OiB0ZXh0Ow0KICAgIC1tcy11c2VyLXNlbGVjdDogdGV4dDsNCiAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7DQogICAgd29yZC13cmFwOiBicmVhay13b3JkOw0KfQ0KDQoudGVybWluYWwtZXJyb3Igew0KICAgIGNvbG9yOiAjZmY2YjZiOw0KfQ0KDQoudGVybWluYWwtc3VjY2VzcyB7DQogICAgY29sb3I6ICM1MWNmNjY7DQp9DQoNCi50ZXJtaW5hbC1pbmZvIHsNCiAgICBjb2xvcjogIzc0YzBmYzsNCn0NCg0KLnRlcm1pbmFsLWlucHV0LWNvbnRhaW5lciB7DQogICAgYmFja2dyb3VuZDogIzFlMWUxZTsNCiAgICBib3JkZXItdG9wOiAxcHggc29saWQgIzQ0NDsNCiAgICBwYWRkaW5nOiA4cHggMTJweDsNCn0NCg0KLnRlcm1pbmFsLWlucHV0LWxpbmUgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgICBib3JkZXI6IG5vbmU7DQogICAgY29sb3I6ICNmZmZmZmY7DQogICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsNCiAgICBmb250LXNpemU6IDEycHg7DQogICAgb3V0bGluZTogbm9uZTsNCiAgICB3aWR0aDogMTAwJTsNCn0NCg0KLnRlcm1pbmFsLXByb21wdCB7DQogICAgY29sb3I6ICMwMGZmMDA7DQogICAgbWFyZ2luLXJpZ2h0OiA4cHg7DQogICAgdXNlci1zZWxlY3Q6IG5vbmU7DQp9DQoNCi50ZXJtaW5hbC1pbnB1dCB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQogICAgYm9yZGVyOiBub25lOw0KICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7DQogICAgZm9udC1zaXplOiAxMnB4Ow0KICAgIG91dGxpbmU6IG5vbmU7DQogICAgZmxleDogMTsNCn0NCg0KLnRlcm1pbmFsLWlucHV0OjpwbGFjZWhvbGRlciB7DQogICAgY29sb3I6ICM2NjY7DQp9DQoNCi8qIFRlcm1pbmFsIHNlbGVjdGlvbiBzdHlsaW5nICovDQoudGVybWluYWwtb3V0cHV0OjpzZWxlY3Rpb24gew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDY2Y2M7DQogICAgY29sb3I6ICNmZmZmZmY7DQp9DQoNCi50ZXJtaW5hbC1vdXRwdXQ6Oi1tb3otc2VsZWN0aW9uIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2NmNjOw0KICAgIGNvbG9yOiAjZmZmZmZmOw0KfQ0KDQoudGVybWluYWwtbGluZTo6c2VsZWN0aW9uIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2NmNjOw0KICAgIGNvbG9yOiAjZmZmZmZmOw0KfQ0KDQoudGVybWluYWwtbGluZTo6LW1vei1zZWxlY3Rpb24gew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDY2Y2M7DQogICAgY29sb3I6ICNmZmZmZmY7DQp9DQoNCi8qIFJlc3BvbnNpdmUgRGVzaWduICovDQpAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsNCiAgICAuYXBwLXRvb2xiYXIgew0KICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICBnYXA6IDEwcHg7DQogICAgfQ0KICAgIA0KICAgIC5hcHAtYnRuLWdyb3VwIHsNCiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgfQ0KICAgIA0KICAgIC5lZGl0b3Itc3RhdHVzIHsNCiAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICBnYXA6IDEwcHg7DQogICAgfQ0KICAgIA0KICAgIC5saW5lLW51bWJlcnMgew0KICAgICAgICBtaW4td2lkdGg6IDQwcHg7DQogICAgICAgIGZvbnQtc2l6ZTogMTNweDsgLyogTWF0Y2ggZWRpdG9yIGZvbnQgc2l6ZSAqLw0KICAgIH0NCiAgICANCiAgICAjdGV4dC1lZGl0b3IsDQogICAgLmhpZ2hsaWdodGVkLWVkaXRvciB7DQogICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICB9DQogICAgDQogICAgLmludGVncmF0ZWQtdGVybWluYWwgew0KICAgICAgICBtaW4taGVpZ2h0OiAxNTBweDsNCiAgICAgICAgbWF4LWhlaWdodDogMzAwcHg7DQogICAgfQ0KICAgIA0KICAgIC50ZXJtaW5hbC1vdXRwdXQgew0KICAgICAgICBmb250LXNpemU6IDExcHg7DQogICAgICAgIG1pbi1oZWlnaHQ6IDgwcHg7DQogICAgICAgIG1heC1oZWlnaHQ6IDE1MHB4Ow0KICAgIH0NCiAgICANCiAgICAudGVybWluYWwtaW5wdXQgew0KICAgICAgICBmb250LXNpemU6IDExcHg7DQogICAgfQ0KfQ0KDQovKiBGb2N1cyBTdGF0ZXMgKi8NCiN0ZXh0LWVkaXRvcjpmb2N1cyB7DQogICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1iZyk7DQp9DQoNCi8qIFNjcm9sbGJhciBTdHlsaW5nICovDQojdGV4dC1lZGl0b3I6Oi13ZWJraXQtc2Nyb2xsYmFyLA0KLmxpbmUtbnVtYmVyczo6LXdlYmtpdC1zY3JvbGxiYXIsDQouaGlnaGxpZ2h0ZWQtZWRpdG9yOjotd2Via2l0LXNjcm9sbGJhciB7DQogICAgd2lkdGg6IDhweDsNCiAgICBoZWlnaHQ6IDhweDsNCn0NCg0KI3RleHQtZWRpdG9yOjotd2Via2l0LXNjcm9sbGJhci10cmFjaywNCi5saW5lLW51bWJlcnM6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrLA0KLmhpZ2hsaWdodGVkLWVkaXRvcjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sgew0KICAgIGJhY2tncm91bmQ6IHZhcigtLWdsYXNzLWJnKTsNCn0NCg0KI3RleHQtZWRpdG9yOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiwNCi5saW5lLW51bWJlcnM6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iLA0KLmhpZ2hsaWdodGVkLWVkaXRvcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgew0KICAgIGJhY2tncm91bmQ6IHZhcigtLWJvcmRlci1jb2xvcik7DQogICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KfQ0KDQojdGV4dC1lZGl0b3I6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyLA0KLmxpbmUtbnVtYmVyczo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIsDQouaGlnaGxpZ2h0ZWQtZWRpdG9yOjotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7DQogICAgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50LWNvbG9yKTsNCn0NCg0KLyogQXBwIFRvb2xiYXIgKi8NCi5hcHAtdG9vbGJhciB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBwYWRkaW5nOiAxNXB4Ow0KICAgIGJhY2tncm91bmQ6IHZhcigtLWdsYXNzLWJnKTsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsNCiAgICBmbGV4LXNocmluazogMDsNCn0NCg0KLmFwcC1idG4tZ3JvdXAgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZ2FwOiAxMHB4Ow0KfQ0KDQovKiBBbmltYXRpb24gZm9yIHN0YXR1cyBjaGFuZ2VzICovDQouc3RhdHVzLXZhbHVlIHsNCiAgICB0cmFuc2l0aW9uOiBjb2xvciAwLjJzIGVhc2U7DQp9DQoNCi8qIE1vZGlmaWVkIHN0YXR1cyBpbmRpY2F0b3IgKi8NCi5zdGF0dXMtdmFsdWUubW9kaWZpZWQgew0KICAgIGNvbG9yOiAjZmY5ODAwOw0KICAgIGFuaW1hdGlvbjogcHVsc2UgMnMgaW5maW5pdGU7DQp9DQoNCkBrZXlmcmFtZXMgcHVsc2Ugew0KICAgIDAlIHsgb3BhY2l0eTogMTsgfQ0KICAgIDUwJSB7IG9wYWNpdHk6IDAuNzsgfQ0KICAgIDEwMCUgeyBvcGFjaXR5OiAxOyB9DQp9DQoNCi8qIENvZGUgVmFsaWRhdGlvbiBFcnJvciBTdHlsZXMgKi8NCi5saW5lLWVycm9yIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMTA3LCAxMDcsIDAuMikgIWltcG9ydGFudDsNCiAgICBjb2xvcjogI2ZmNmI2YiAhaW1wb3J0YW50Ow0KICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2ZmNmI2YiAhaW1wb3J0YW50Ow0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCg0KLmxpbmUtZXJyb3I6OmJlZm9yZSB7DQogICAgY29udGVudDogIuKaoCI7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGxlZnQ6IDJweDsNCiAgICB0b3A6IDUwJTsNCiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogICAgY29sb3I6ICNmZjZiNmI7DQogICAgZm9udC1zaXplOiAxMHB4Ow0KICAgIHotaW5kZXg6IDE7DQp9DQoNCi8qIEVycm9yIGNvdW50IGluIHN0YXR1cyBiYXIgKi8NCi5zdGF0dXMtdmFsdWUgew0KICAgIHRyYW5zaXRpb246IGNvbG9yIDAuM3MgZWFzZTsNCn0NCg0KLyogQWN0aXZlIHZhbGlkYXRpb24gdG9nZ2xlIGJ1dHRvbiAqLw0KLmFwcC1idG4uYWN0aXZlIHsNCiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1hY2NlbnQtcHJpbWFyeSk7DQogICAgY29sb3I6IHdoaXRlOw0KfSA8L3N0eWxlPg0KPHNjcmlwdD4vLyA9PT09PSBTY3JpcHQ6IGpzL3V0aWxzLmpzID09PT09DQoNCg0KLy8gPT09PT0gU2NyaXB0OiBqcy9zZXR0aW5ncy1tYW5hZ2VyLmpzID09PT09DQoNCg0KLy8gPT09PT0gU2NyaXB0OiBqcy9maWxlLW1hbmFnZXIuanMgPT09PT0NCg0KDQovLyA9PT09PSBTY3JpcHQ6IGpzL2VkaXRvci1tYW5hZ2VyLmpzID09PT09DQoNCg0KLy8gPT09PT0gU2NyaXB0OiBqcy9zeW50YXgtaGlnaGxpZ2h0aW5nLmpzID09PT09DQoNCg0KLy8gPT09PT0gU2NyaXB0OiBqcy9jb2RlLXZhbGlkYXRpb24uanMgPT09PT0NCg0KDQovLyA9PT09PSBTY3JpcHQ6IGpzL3Rlcm1pbmFsLW1hbmFnZXIuanMgPT09PT0NCg0KDQovLyA9PT09PSBTY3JpcHQ6IGpzL3VpLW1hbmFnZXIuanMgPT09PT0NCg0KDQovLyA9PT09PSBTY3JpcHQ6IGpzL21haW4uanMgPT09PT0NCg0KDQovLyBDaGVjayBpZiBmaWxlIGlzIHN1cHBvcnRlZCBmb3Igc3ludGF4IGhpZ2hsaWdodGluZw0KZnVuY3Rpb24gZ2V0RmlsZUxhbmd1YWdlKGZpbGVQYXRoKSB7DQogICAgaWYgKCFmaWxlUGF0aCkgcmV0dXJuIG51bGw7DQogICAgDQogICAgY29uc3QgZXh0ZW5zaW9uID0gZmlsZVBhdGgudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoZmlsZVBhdGgubGFzdEluZGV4T2YoJy4nKSk7DQogICAgDQogICAgY29uc3QgbGFuZ3VhZ2VNYXAgPSB7DQogICAgICAgICcucHknOiAncHl0aG9uJywNCiAgICAgICAgJy5weXcnOiAncHl0aG9uJywgDQogICAgICAgICcucHl4JzogJ3B5dGhvbicsDQogICAgICAgICcucHlpJzogJ3B5dGhvbicsDQogICAgICAgICcucHlkJzogJ3B5dGhvbicsDQogICAgICAgICcuanMnOiAnamF2YXNjcmlwdCcsDQogICAgICAgICcuanNvbic6ICdqc29uJywNCiAgICAgICAgJy5odG1sJzogJ2h0bWwnLA0KICAgICAgICAnLmh0bSc6ICdodG1sJywNCiAgICAgICAgJy5jc3MnOiAnY3NzJw0KICAgIH07DQogICAgDQogICAgcmV0dXJuIGxhbmd1YWdlTWFwW2V4dGVuc2lvbl0gfHwgbnVsbDsNCn0NCg0KLy8gQ2hlY2sgaWYgZmlsZSBpcyBQeXRob24gKGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5KQ0KZnVuY3Rpb24gaXNQeXRob25GaWxlKGZpbGVQYXRoKSB7DQogICAgcmV0dXJuIGdldEZpbGVMYW5ndWFnZShmaWxlUGF0aCkgPT09ICdweXRob24nOw0KfQ0KDQovLyBTaW1wbGUgaGVscGVyIGZ1bmN0aW9ucyAoa2VlcGluZyB0aGVzZSBmb3IgcG90ZW50aWFsIGZ1dHVyZSB1c2UpDQpmdW5jdGlvbiBnZXRTaW1wbGVUZXh0Q29udGVudCgpIHsNCiAgICByZXR1cm4gdGV4dEVkaXRvci50ZXh0YXJlYS52YWx1ZTsNCn0NCg0KLy8gTG9hZCBhcHAgc2V0dGluZ3MNCmFzeW5jIGZ1bmN0aW9uIGxvYWRTZXR0aW5ncygpIHsNCiAgICB0cnkgew0KICAgICAgICB0ZXh0RWRpdG9yLnNldHRpbmdzID0gew0KICAgICAgICAgICAgYXV0b1NhdmVJbnRlcnZhbDogYXdhaXQgc3lwbmV4QVBJLmdldFNldHRpbmcoJ0FVVE9fU0FWRV9JTlRFUlZBTCcsIDMwKSwNCiAgICAgICAgICAgIGZvbnRTaXplOiBhd2FpdCBzeXBuZXhBUEkuZ2V0U2V0dGluZygnRk9OVF9TSVpFJywgMTQpLA0KICAgICAgICAgICAgdGFiU2l6ZTogYXdhaXQgc3lwbmV4QVBJLmdldFNldHRpbmcoJ1RBQl9TSVpFJywgNCksDQogICAgICAgICAgICBzeW50YXhIaWdobGlnaHRpbmc6IGF3YWl0IHN5cG5leEFQSS5nZXRTZXR0aW5nKCdTWU5UQVhfSElHSExJR0hUSU5HJywgdHJ1ZSksDQogICAgICAgICAgICBjb2RlVmFsaWRhdGlvbjogYXdhaXQgc3lwbmV4QVBJLmdldFNldHRpbmcoJ0NPREVfVkFMSURBVElPTicsIHRydWUpDQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICAvLyBBcHBseSBzZXR0aW5ncw0KICAgICAgICB0ZXh0RWRpdG9yLnRleHRhcmVhLnN0eWxlLmZvbnRTaXplID0gdGV4dEVkaXRvci5zZXR0aW5ncy5mb250U2l6ZSArICdweCc7DQogICAgICAgIHRleHRFZGl0b3IudGV4dGFyZWEuc3R5bGUudGFiU2l6ZSA9IHRleHRFZGl0b3Iuc2V0dGluZ3MudGFiU2l6ZTsNCiAgICAgICAgdGV4dEVkaXRvci52YWxpZGF0aW9uRW5hYmxlZCA9IHRleHRFZGl0b3Iuc2V0dGluZ3MuY29kZVZhbGlkYXRpb247DQogICAgICAgIA0KICAgICAgICBjb25zb2xlLmxvZygnU2V0dGluZ3MgbG9hZGVkOicsIHRleHRFZGl0b3Iuc2V0dGluZ3MpOw0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHNldHRpbmdzOicsIGVycm9yKTsNCiAgICAgICAgLy8gVXNlIGRlZmF1bHRzDQogICAgICAgIHRleHRFZGl0b3Iuc2V0dGluZ3MgPSB7DQogICAgICAgICAgICBhdXRvU2F2ZUludGVydmFsOiAzMCwNCiAgICAgICAgICAgIGZvbnRTaXplOiAxNCwNCiAgICAgICAgICAgIHRhYlNpemU6IDQsDQogICAgICAgICAgICBzeW50YXhIaWdobGlnaHRpbmc6IHRydWUsDQogICAgICAgICAgICBjb2RlVmFsaWRhdGlvbjogdHJ1ZQ0KICAgICAgICB9Ow0KICAgICAgICB0ZXh0RWRpdG9yLnZhbGlkYXRpb25FbmFibGVkID0gdHJ1ZTsNCiAgICB9DQp9DQoNCg0KDQovLyBMb2FkIHRlcm1pbmFsIHN0YXRlDQphc3luYyBmdW5jdGlvbiBsb2FkVGVybWluYWxTdGF0ZSgpIHsNCiAgICB0cnkgew0KICAgICAgICBjb25zdCB0ZXJtaW5hbEVuYWJsZWQgPSBhd2FpdCBzeXBuZXhBUEkuZ2V0U2V0dGluZygnVEVSTUlOQUxfRU5BQkxFRCcsIGZhbHNlKTsNCiAgICAgICAgaWYgKHRlcm1pbmFsRW5hYmxlZCAmJiBpbnRlZ3JhdGVkVGVybWluYWwpIHsNCiAgICAgICAgICAgIGludGVncmF0ZWRUZXJtaW5hbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsNCiAgICAgICAgICAgIGlmICh0ZXJtaW5hbFRvZ2dsZSkgew0KICAgICAgICAgICAgICAgIHRlcm1pbmFsVG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgdGVybWluYWwgc3RhdGU6JywgZXJyb3IpOw0KICAgIH0NCn0NCg0KDQovLyBDcmVhdGUgbmV3IGZpbGUNCmZ1bmN0aW9uIGNyZWF0ZU5ld0ZpbGUoKSB7DQogICAgaWYgKHRleHRFZGl0b3IuaXNNb2RpZmllZCkgew0KICAgICAgICBpZiAoY29uZmlybSgnWW91IGhhdmUgdW5zYXZlZCBjaGFuZ2VzLiBDcmVhdGUgbmV3IGZpbGUgYW55d2F5PycpKSB7DQogICAgICAgICAgICBjbGVhckVkaXRvcigpOw0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgY2xlYXJFZGl0b3IoKTsNCiAgICB9DQp9DQoNCi8vIExvYWQgZmlsZSBmcm9tIFZGUw0KYXN5bmMgZnVuY3Rpb24gbG9hZEZpbGUoKSB7DQogICAgdHJ5IHsNCiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBhd2FpdCBzeXBuZXhBUEkuc2hvd0ZpbGVFeHBsb3Jlcih7DQogICAgICAgICAgICBtb2RlOiAnb3BlbicsDQogICAgICAgICAgICB0aXRsZTogJ09wZW4gVGV4dCBGaWxlJywNCiAgICAgICAgICAgIGluaXRpYWxQYXRoOiAnLycsDQogICAgICAgICAgICBvblNlbGVjdDogKHNlbGVjdGVkUGF0aCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGaWxlIHNlbGVjdGVkIGZvciBsb2FkaW5nOicsIHNlbGVjdGVkUGF0aCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmlsZSBzZWxlY3Rpb24gY2FuY2VsbGVkJyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgICANCiAgICAgICAgaWYgKCFmaWxlUGF0aCkgew0KICAgICAgICAgICAgcmV0dXJuOyAvLyBVc2VyIGNhbmNlbGxlZA0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBDaGVjayBpZiBmaWxlIGV4aXN0cyBhbmQgbG9hZCBpdA0KICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgc3lwbmV4QVBJLnJlYWRWaXJ0dWFsRmlsZVRleHQoZmlsZVBhdGgpOw0KICAgICAgICANCiAgICAgICAgLy8gTG9hZCBjb250ZW50IGludG8gZWRpdG9yDQogICAgICAgIHRleHRFZGl0b3IudGV4dGFyZWEudmFsdWUgPSBjb250ZW50Ow0KICAgICAgICB0ZXh0RWRpdG9yLmZpbGVQYXRoID0gZmlsZVBhdGg7DQogICAgICAgIHRleHRFZGl0b3Iub3JpZ2luYWxDb250ZW50ID0gY29udGVudDsNCiAgICAgICAgDQogICAgICAgIC8vIFVwZGF0ZSBVSQ0KICAgICAgICB1cGRhdGVGaWxlbmFtZURpc3BsYXkoKTsNCiAgICAgICAgdXBkYXRlTGluZU51bWJlcnMoKTsNCiAgICAgICAgdXBkYXRlU3RhdHVzKCk7DQogICAgICAgIG1hcmtBc1NhdmVkKCk7DQogICAgICAgIA0KICAgICAgICAvLyBFbmFibGUgc3ludGF4IGhpZ2hsaWdodGluZyBmb3IgbG9hZGVkIGZpbGUNCiAgICAgICAgYXdhaXQgZW5hYmxlU3ludGF4SGlnaGxpZ2h0aW5nKCk7DQogICAgICAgIA0KICAgICAgICAvLyBGb3JjZSB1cGRhdGUgaGlnaGxpZ2h0ZWQgY29udGVudCBpZiBoaWdobGlnaHRpbmcgaXMgZW5hYmxlZA0KICAgICAgICBpZiAodGV4dEVkaXRvci5zeW50YXhIaWdobGlnaHRpbmdFbmFibGVkICYmIHRleHRFZGl0b3IuaGlnaGxpZ2h0ZWRFZGl0b3IpIHsNCiAgICAgICAgICAgIHVwZGF0ZUhpZ2hsaWdodGVkQ29udGVudCgpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBTY2hlZHVsZSB2YWxpZGF0aW9uIGZvciBQeXRob24gZmlsZXMNCiAgICAgICAgc2NoZWR1bGVWYWxpZGF0aW9uKCk7DQogICAgICAgIA0KICAgICAgICBzeXBuZXhBUEkuc2hvd05vdGlmaWNhdGlvbihgRmlsZSBsb2FkZWQ6ICR7ZmlsZVBhdGh9YCwgJ3N1Y2Nlc3MnKTsNCiAgICAgICAgDQogICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgZmlsZTonLCBlcnJvcik7DQogICAgICAgIHN5cG5leEFQSS5zaG93Tm90aWZpY2F0aW9uKGBGYWlsZWQgdG8gbG9hZCBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ2Vycm9yJyk7DQogICAgfQ0KfQ0KDQoNCi8vIFNhdmUgZmlsZSB0byBWRlMNCmFzeW5jIGZ1bmN0aW9uIHNhdmVGaWxlKCkgew0KICAgIGNvbnN0IGNvbnRlbnQgPSB0ZXh0RWRpdG9yLnRleHRhcmVhLnZhbHVlOw0KICAgIA0KICAgIHRyeSB7DQogICAgICAgIGxldCBmaWxlUGF0aCA9IHRleHRFZGl0b3IuZmlsZVBhdGg7DQogICAgICAgIA0KICAgICAgICAvLyBJZiBpdCdzIGEgbmV3IGZpbGUgKHVudGl0bGVkKSBvciB3ZSB3YW50IHRvIHNhdmUgYXMsIHNob3cgZmlsZSBleHBsb3Jlcg0KICAgICAgICBpZiAodGV4dEVkaXRvci5maWxlUGF0aCA9PT0gJy91bnRpdGxlZC50eHQnKSB7DQogICAgICAgICAgICBmaWxlUGF0aCA9IGF3YWl0IHN5cG5leEFQSS5zaG93RmlsZUV4cGxvcmVyKHsNCiAgICAgICAgICAgICAgICBtb2RlOiAnc2F2ZScsDQogICAgICAgICAgICAgICAgdGl0bGU6ICdTYXZlIFRleHQgRmlsZScsDQogICAgICAgICAgICAgICAgaW5pdGlhbFBhdGg6ICcvJywNCiAgICAgICAgICAgICAgICBmaWxlTmFtZTogJ3VudGl0bGVkLnR4dCcsDQogICAgICAgICAgICAgICAgb25TZWxlY3Q6IChzZWxlY3RlZFBhdGgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgc2VsZWN0ZWQgZm9yIHNhdmluZzonLCBzZWxlY3RlZFBhdGgpOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgc2VsZWN0aW9uIGNhbmNlbGxlZCcpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIWZpbGVQYXRoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBVc2VyIGNhbmNlbGxlZA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBhd2FpdCBzeXBuZXhBUEkud3JpdGVWaXJ0dWFsRmlsZShmaWxlUGF0aCwgY29udGVudCk7DQogICAgICAgIA0KICAgICAgICB0ZXh0RWRpdG9yLmZpbGVQYXRoID0gZmlsZVBhdGg7DQogICAgICAgIHVwZGF0ZUZpbGVuYW1lRGlzcGxheSgpOw0KICAgICAgICBtYXJrQXNTYXZlZCgpOw0KICAgICAgICANCiAgICAgICAgLy8gRW5hYmxlIHN5bnRheCBoaWdobGlnaHRpbmcgZm9yIHNhdmVkIGZpbGUNCiAgICAgICAgYXdhaXQgZW5hYmxlU3ludGF4SGlnaGxpZ2h0aW5nKCk7DQogICAgICAgIA0KICAgICAgICAvLyBGb3JjZSB1cGRhdGUgaGlnaGxpZ2h0ZWQgY29udGVudCBpZiBoaWdobGlnaHRpbmcgaXMgZW5hYmxlZA0KICAgICAgICBpZiAodGV4dEVkaXRvci5zeW50YXhIaWdobGlnaHRpbmdFbmFibGVkICYmIHRleHRFZGl0b3IuaGlnaGxpZ2h0ZWRFZGl0b3IpIHsNCiAgICAgICAgICAgIHVwZGF0ZUhpZ2hsaWdodGVkQ29udGVudCgpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBzeXBuZXhBUEkuc2hvd05vdGlmaWNhdGlvbihgRmlsZSBzYXZlZDogJHtmaWxlUGF0aH1gLCAnc3VjY2VzcycpOw0KICAgICAgICANCiAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBmaWxlOicsIGVycm9yKTsNCiAgICAgICAgc3lwbmV4QVBJLnNob3dOb3RpZmljYXRpb24oYEZhaWxlZCB0byBzYXZlIGZpbGU6ICR7ZXJyb3IubWVzc2FnZX1gLCAnZXJyb3InKTsNCiAgICB9DQp9DQoNCi8vIFNhdmUgZmlsZSBhcyAoYWx3YXlzIHNob3cgZmlsZSBleHBsb3JlcikNCmFzeW5jIGZ1bmN0aW9uIHNhdmVBc0ZpbGUoKSB7DQogICAgY29uc3QgY29udGVudCA9IHRleHRFZGl0b3IudGV4dGFyZWEudmFsdWU7DQogICAgDQogICAgdHJ5IHsNCiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBhd2FpdCBzeXBuZXhBUEkuc2hvd0ZpbGVFeHBsb3Jlcih7DQogICAgICAgICAgICBtb2RlOiAnc2F2ZScsDQogICAgICAgICAgICB0aXRsZTogJ1NhdmUgVGV4dCBGaWxlIEFzJywNCiAgICAgICAgICAgIGluaXRpYWxQYXRoOiAnLycsDQogICAgICAgICAgICBmaWxlTmFtZTogdGV4dEVkaXRvci5maWxlUGF0aCA9PT0gJy91bnRpdGxlZC50eHQnID8gJ3VudGl0bGVkLnR4dCcgOiB0ZXh0RWRpdG9yLmZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCksDQogICAgICAgICAgICBvblNlbGVjdDogKHNlbGVjdGVkUGF0aCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGaWxlIHNlbGVjdGVkIGZvciBzYXZpbmcgYXM6Jywgc2VsZWN0ZWRQYXRoKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGaWxlIHNlbGVjdGlvbiBjYW5jZWxsZWQnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICAgIA0KICAgICAgICBpZiAoIWZpbGVQYXRoKSB7DQogICAgICAgICAgICByZXR1cm47IC8vIFVzZXIgY2FuY2VsbGVkDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGF3YWl0IHN5cG5leEFQSS53cml0ZVZpcnR1YWxGaWxlKGZpbGVQYXRoLCBjb250ZW50KTsNCiAgICAgICAgDQogICAgICAgIHRleHRFZGl0b3IuZmlsZVBhdGggPSBmaWxlUGF0aDsNCiAgICAgICAgdXBkYXRlRmlsZW5hbWVEaXNwbGF5KCk7DQogICAgICAgIG1hcmtBc1NhdmVkKCk7DQogICAgICAgIA0KICAgICAgICAvLyBFbmFibGUgc3ludGF4IGhpZ2hsaWdodGluZyBmb3Igc2F2ZWQgZmlsZQ0KICAgICAgICBhd2FpdCBlbmFibGVTeW50YXhIaWdobGlnaHRpbmcoKTsNCiAgICAgICAgDQogICAgICAgIC8vIEZvcmNlIHVwZGF0ZSBoaWdobGlnaHRlZCBjb250ZW50IGlmIGhpZ2hsaWdodGluZyBpcyBlbmFibGVkDQogICAgICAgIGlmICh0ZXh0RWRpdG9yLnN5bnRheEhpZ2hsaWdodGluZ0VuYWJsZWQgJiYgdGV4dEVkaXRvci5oaWdobGlnaHRlZEVkaXRvcikgew0KICAgICAgICAgICAgdXBkYXRlSGlnaGxpZ2h0ZWRDb250ZW50KCk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHN5cG5leEFQSS5zaG93Tm90aWZpY2F0aW9uKGBGaWxlIHNhdmVkIGFzOiAke2ZpbGVQYXRofWAsICdzdWNjZXNzJyk7DQogICAgICAgIA0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGZpbGUgYXM6JywgZXJyb3IpOw0KICAgICAgICBzeXBuZXhBUEkuc2hvd05vdGlmaWNhdGlvbihgRmFpbGVkIHRvIHNhdmUgZmlsZSBhczogJHtlcnJvci5tZXNzYWdlfWAsICdlcnJvcicpOw0KICAgIH0NCn0NCg0KDQovLyBVcGRhdGUgbGluZSBudW1iZXJzDQpmdW5jdGlvbiB1cGRhdGVMaW5lTnVtYmVycygpIHsNCiAgICBpZiAoIXRleHRFZGl0b3IubGluZU51bWJlcnMgfHwgIXRleHRFZGl0b3IubGluZU51bWJlcnNFbmFibGVkKSByZXR1cm47DQogICAgDQogICAgY29uc3QgbGluZXMgPSB0ZXh0RWRpdG9yLnRleHRhcmVhLnZhbHVlLnNwbGl0KCdcbicpOw0KICAgIGNvbnN0IGxpbmVDb3VudCA9IGxpbmVzLmxlbmd0aDsNCiAgICANCiAgICAvLyBHZW5lcmF0ZSBsaW5lIG51bWJlcnMgSFRNTA0KICAgIGxldCBsaW5lTnVtYmVyc0hUTUwgPSAnJzsNCiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBsaW5lQ291bnQ7IGkrKykgew0KICAgICAgICBsaW5lTnVtYmVyc0hUTUwgKz0gYDxzcGFuIGNsYXNzPSJsaW5lLW51bWJlciI+JHtpfTwvc3Bhbj5cbmA7DQogICAgfQ0KICAgIA0KICAgIHRleHRFZGl0b3IubGluZU51bWJlcnMuaW5uZXJIVE1MID0gbGluZU51bWJlcnNIVE1MOw0KfQ0KDQovLyBTeW5jIHNjcm9sbCBiZXR3ZWVuIHRleHRhcmVhIGFuZCBsaW5lIG51bWJlcnMNCmZ1bmN0aW9uIHN5bmNTY3JvbGwoKSB7DQogICAgaWYgKHRleHRFZGl0b3IubGluZU51bWJlcnMgJiYgdGV4dEVkaXRvci5saW5lTnVtYmVyc0VuYWJsZWQpIHsNCiAgICAgICAgdGV4dEVkaXRvci5saW5lTnVtYmVycy5zY3JvbGxUb3AgPSB0ZXh0RWRpdG9yLnRleHRhcmVhLnNjcm9sbFRvcDsNCiAgICB9DQogICAgDQogICAgLy8gQWxzbyBzeW5jIHRoZSBiYWNrZHJvcCBpZiBpdCBleGlzdHMNCiAgICBzeW5jQmFja2Ryb3BTY3JvbGwoKTsNCn0NCg0KDQovLyBIYW5kbGUgdGV4dCBjaGFuZ2VzDQpmdW5jdGlvbiBoYW5kbGVUZXh0Q2hhbmdlKCkgew0KICAgIHVwZGF0ZUxpbmVOdW1iZXJzKCk7DQogICAgdXBkYXRlU3RhdHVzKCk7DQogICAgbWFya0FzTW9kaWZpZWQoKTsNCiAgICANCiAgICAvLyBTY2hlZHVsZSB2YWxpZGF0aW9uIGZvciBQeXRob24gZmlsZXMNCiAgICBzY2hlZHVsZVZhbGlkYXRpb24oKTsNCn0NCg0KLy8gRm9jdXMgYXBwcm9wcmlhdGUgZWRpdG9yDQpmdW5jdGlvbiBmb2N1c0VkaXRvcigpIHsNCiAgICBpZiAodGV4dEVkaXRvci50ZXh0YXJlYSkgew0KICAgICAgICB0ZXh0RWRpdG9yLnRleHRhcmVhLmZvY3VzKCk7DQogICAgfQ0KfQ0KDQoNCi8vIFVwZGF0ZSBmaWxlbmFtZSBkaXNwbGF5DQpmdW5jdGlvbiB1cGRhdGVGaWxlbmFtZURpc3BsYXkoKSB7DQogICAgaWYgKGN1cnJlbnRGaWxlbmFtZUVsKSB7DQogICAgICAgIGNvbnN0IGZpbGVuYW1lID0gdGV4dEVkaXRvci5maWxlUGF0aCA/IHRleHRFZGl0b3IuZmlsZVBhdGguc3BsaXQoJy8nKS5wb3AoKSA6ICd1bnRpdGxlZC50eHQnOw0KICAgICAgICBjdXJyZW50RmlsZW5hbWVFbC50ZXh0Q29udGVudCA9IGZpbGVuYW1lOw0KICAgIH0NCn0NCg0KLy8gSW5pdGlhbGl6ZSBlZGl0b3Igc3RhdGUNCmZ1bmN0aW9uIGluaXRpYWxpemVFZGl0b3IoKSB7DQogICAgLy8gU2V0IGluaXRpYWwgZmlsZSBwYXRoDQogICAgdGV4dEVkaXRvci5maWxlUGF0aCA9ICcvdW50aXRsZWQudHh0JzsNCiAgICB1cGRhdGVGaWxlbmFtZURpc3BsYXkoKTsNCiAgICANCiAgICAvLyBVcGRhdGUgbGluZSBudW1iZXJzDQogICAgdXBkYXRlTGluZU51bWJlcnMoKTsNCiAgICANCiAgICAvLyBVcGRhdGUgc3RhdHVzDQogICAgdXBkYXRlU3RhdHVzKCk7DQogICAgDQogICAgLy8gRW5hYmxlIHN5bnRheCBoaWdobGlnaHRpbmcgaWYgbmVlZGVkDQogICAgZW5hYmxlU3ludGF4SGlnaGxpZ2h0aW5nKCk7DQogICAgDQogICAgLy8gU3RhcnQgYXV0by1zYXZlIGlmIGVuYWJsZWQNCiAgICBpZiAodGV4dEVkaXRvci5zZXR0aW5ncy5hdXRvU2F2ZUludGVydmFsID4gMCkgew0KICAgICAgICBzdGFydEF1dG9TYXZlKCk7DQogICAgfQ0KfQ0KDQoNCg0KLy8gVXBkYXRlIHN0YXR1cyBiYXINCmZ1bmN0aW9uIHVwZGF0ZVN0YXR1cygpIHsNCiAgICAvLyBTdGF0dXMgYmFyIG5vdyBvbmx5IHNob3dzIG1vZGlmaWVkIHN0YXR1cywgd2hpY2ggaXMgaGFuZGxlZCBieSBtYXJrQXNNb2RpZmllZC9tYXJrQXNTYXZlZA0KICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMga2VwdCBmb3IgcG90ZW50aWFsIGZ1dHVyZSB1c2UNCn0NCg0KLy8gTWFyayBmaWxlIGFzIG1vZGlmaWVkDQpmdW5jdGlvbiBtYXJrQXNNb2RpZmllZCgpIHsNCiAgICBpZiAoIXRleHRFZGl0b3IuaXNNb2RpZmllZCkgew0KICAgICAgICB0ZXh0RWRpdG9yLmlzTW9kaWZpZWQgPSB0cnVlOw0KICAgICAgICBpZiAobW9kaWZpZWRTdGF0dXNFbCkgew0KICAgICAgICAgICAgbW9kaWZpZWRTdGF0dXNFbC50ZXh0Q29udGVudCA9ICdZZXMnOw0KICAgICAgICAgICAgbW9kaWZpZWRTdGF0dXNFbC5jbGFzc0xpc3QuYWRkKCdtb2RpZmllZCcpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQovLyBNYXJrIGZpbGUgYXMgc2F2ZWQNCmZ1bmN0aW9uIG1hcmtBc1NhdmVkKCkgew0KICAgIHRleHRFZGl0b3IuaXNNb2RpZmllZCA9IGZhbHNlOw0KICAgIHRleHRFZGl0b3Iub3JpZ2luYWxDb250ZW50ID0gdGV4dEVkaXRvci50ZXh0YXJlYS52YWx1ZTsNCiAgICBpZiAobW9kaWZpZWRTdGF0dXNFbCkgew0KICAgICAgICBtb2RpZmllZFN0YXR1c0VsLnRleHRDb250ZW50ID0gJ05vJzsNCiAgICAgICAgbW9kaWZpZWRTdGF0dXNFbC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RpZmllZCcpOw0KICAgIH0NCn0NCg0KDQovLyBDbGVhciBlZGl0b3INCmZ1bmN0aW9uIGNsZWFyRWRpdG9yKCkgew0KICAgIHRleHRFZGl0b3IudGV4dGFyZWEudmFsdWUgPSAnJzsNCiAgICB0ZXh0RWRpdG9yLmZpbGVQYXRoID0gJy91bnRpdGxlZC50eHQnOw0KICAgIHVwZGF0ZUZpbGVuYW1lRGlzcGxheSgpOw0KICAgIHRleHRFZGl0b3Iub3JpZ2luYWxDb250ZW50ID0gJyc7DQogICAgbWFya0FzU2F2ZWQoKTsNCiAgICB1cGRhdGVMaW5lTnVtYmVycygpOw0KICAgIHVwZGF0ZVN0YXR1cygpOw0KICAgIA0KICAgIC8vIEVuYWJsZSBzeW50YXggaGlnaGxpZ2h0aW5nIGZvciBuZXcgZmlsZQ0KICAgIGVuYWJsZVN5bnRheEhpZ2hsaWdodGluZygpOw0KICAgIA0KICAgIC8vIEZvcmNlIHVwZGF0ZSBoaWdobGlnaHRlZCBjb250ZW50IGlmIGhpZ2hsaWdodGluZyBpcyBlbmFibGVkDQogICAgaWYgKHRleHRFZGl0b3Iuc3ludGF4SGlnaGxpZ2h0aW5nRW5hYmxlZCAmJiB0ZXh0RWRpdG9yLmhpZ2hsaWdodGVkRWRpdG9yKSB7DQogICAgICAgIHVwZGF0ZUhpZ2hsaWdodGVkQ29udGVudCgpOw0KICAgIH0NCiAgICANCiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgZXJyb3JzDQogICAgY2xlYXJFcnJvck1hcmtlcnMoKTsNCiAgICB1cGRhdGVFcnJvckNvdW50KDApOw0KICAgIA0KICAgIC8vIEZvY3VzIHRoZSB0ZXh0YXJlYSAobm90IHRoZSBiYWNrZHJvcCkNCiAgICBmb2N1c0VkaXRvcigpOw0KfQ0KDQovLyBTdGFydCBhdXRvLXNhdmUNCmZ1bmN0aW9uIHN0YXJ0QXV0b1NhdmUoKSB7DQogICAgaWYgKHRleHRFZGl0b3IuYXV0b1NhdmVJbnRlcnZhbCkgew0KICAgICAgICBjbGVhckludGVydmFsKHRleHRFZGl0b3IuYXV0b1NhdmVJbnRlcnZhbCk7DQogICAgfQ0KICAgIA0KICAgIHRleHRFZGl0b3IuYXV0b1NhdmVJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsNCiAgICAgICAgaWYgKHRleHRFZGl0b3IuaXNNb2RpZmllZCAmJiB0ZXh0RWRpdG9yLmZpbGVQYXRoICYmIHRleHRFZGl0b3IuZmlsZVBhdGggIT09ICcvdW50aXRsZWQudHh0Jykgew0KICAgICAgICAgICAgc2F2ZUZpbGUoKTsNCiAgICAgICAgfQ0KICAgIH0sIHRleHRFZGl0b3Iuc2V0dGluZ3MuYXV0b1NhdmVJbnRlcnZhbCAqIDEwMDApOw0KICAgIA0KICAgIGNvbnNvbGUubG9nKGBBdXRvLXNhdmUgZW5hYmxlZCBldmVyeSAke3RleHRFZGl0b3Iuc2V0dGluZ3MuYXV0b1NhdmVJbnRlcnZhbH0gc2Vjb25kc2ApOw0KfQ0KDQovLyBTdG9wIGF1dG8tc2F2ZQ0KZnVuY3Rpb24gc3RvcEF1dG9TYXZlKCkgew0KICAgIGlmICh0ZXh0RWRpdG9yLmF1dG9TYXZlSW50ZXJ2YWwpIHsNCiAgICAgICAgY2xlYXJJbnRlcnZhbCh0ZXh0RWRpdG9yLmF1dG9TYXZlSW50ZXJ2YWwpOw0KICAgICAgICB0ZXh0RWRpdG9yLmF1dG9TYXZlSW50ZXJ2YWwgPSBudWxsOw0KICAgIH0NCn0NCg0KDQovLyBMb2FkIFByaXNtLmpzIGZvciBzeW50YXggaGlnaGxpZ2h0aW5nDQphc3luYyBmdW5jdGlvbiBsb2FkUHJpc21KUygpIHsNCiAgICBpZiAodGV4dEVkaXRvci5wcmlzbUxvYWRlZCkgcmV0dXJuOw0KICAgIA0KICAgIHRyeSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIFByaXNtLmpzIGZvciBzeW50YXggaGlnaGxpZ2h0aW5nLi4uJyk7DQogICAgICAgIA0KICAgICAgICAvLyBMb2FkIFByaXNtLmpzIGxpYnJhcnkNCiAgICAgICAgYXdhaXQgc3lwbmV4QVBJLmxvYWRMaWJyYXJ5KCdodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9wcmlzbS8xLjI5LjAvcHJpc20ubWluLmpzJywgew0KICAgICAgICAgICAgbG9jYWxOYW1lOiAnUHJpc20nDQogICAgICAgIH0pOw0KICAgICAgICANCiAgICAgICAgLy8gTG9hZCBsYW5ndWFnZSBjb21wb25lbnRzDQogICAgICAgIGF3YWl0IHN5cG5leEFQSS5sb2FkTGlicmFyeSgnaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcHJpc20vMS4yOS4wL2NvbXBvbmVudHMvcHJpc20tcHl0aG9uLm1pbi5qcycpOw0KICAgICAgICBhd2FpdCBzeXBuZXhBUEkubG9hZExpYnJhcnkoJ2h0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3ByaXNtLzEuMjkuMC9jb21wb25lbnRzL3ByaXNtLWphdmFzY3JpcHQubWluLmpzJyk7DQogICAgICAgIGF3YWl0IHN5cG5leEFQSS5sb2FkTGlicmFyeSgnaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcHJpc20vMS4yOS4wL2NvbXBvbmVudHMvcHJpc20tanNvbi5taW4uanMnKTsNCiAgICAgICAgYXdhaXQgc3lwbmV4QVBJLmxvYWRMaWJyYXJ5KCdodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9wcmlzbS8xLjI5LjAvY29tcG9uZW50cy9wcmlzbS1tYXJrdXAubWluLmpzJyk7DQogICAgICAgIGF3YWl0IHN5cG5leEFQSS5sb2FkTGlicmFyeSgnaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcHJpc20vMS4yOS4wL2NvbXBvbmVudHMvcHJpc20tY3NzLm1pbi5qcycpOw0KICAgICAgICANCiAgICAgICAgLy8gTG9hZCBQcmlzbSBDU1MNCiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsNCiAgICAgICAgbGluay5yZWwgPSAnc3R5bGVzaGVldCc7DQogICAgICAgIGxpbmsuaHJlZiA9ICdodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9wcmlzbS8xLjI5LjAvdGhlbWVzL3ByaXNtLXRvbW9ycm93Lm1pbi5jc3MnOw0KICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspOw0KICAgICAgICANCiAgICAgICAgLy8gQWRkIGN1c3RvbSBDU1MgdG8gZml4IHN0eWxpbmcgaXNzdWVzDQogICAgICAgIGNvbnN0IGN1c3RvbVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsNCiAgICAgICAgY3VzdG9tU3R5bGUudGV4dENvbnRlbnQgPSBgDQogICAgICAgICAgICAuaGlnaGxpZ2h0ZWQtYmFja2Ryb3AgKiB7DQogICAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7DQogICAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uLWxpbmU6IG5vbmUgIWltcG9ydGFudDsNCiAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb24tc3R5bGU6IG5vbmUgIWltcG9ydGFudDsNCiAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb24tY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgICAgIHRleHQtdW5kZXJsaW5lLW9mZnNldDogMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLmhpZ2hsaWdodGVkLWJhY2tkcm9wIC50b2tlbi5zdHJpbmcgew0KICAgICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgfQ0KICAgICAgICBgOw0KICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGN1c3RvbVN0eWxlKTsNCiAgICAgICAgDQogICAgICAgIHRleHRFZGl0b3IucHJpc21Mb2FkZWQgPSB0cnVlOw0KICAgICAgICBjb25zb2xlLmxvZygn4pyFIFByaXNtLmpzIHdpdGggYWxsIGxhbmd1YWdlIGdyYW1tYXJzIGxvYWRlZCBzdWNjZXNzZnVsbHknKTsNCiAgICAgICAgDQogICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgUHJpc20uanM6JywgZXJyb3IpOw0KICAgICAgICBzeXBuZXhBUEkuc2hvd05vdGlmaWNhdGlvbignRmFpbGVkIHRvIGxvYWQgc3ludGF4IGhpZ2hsaWdodGluZycsICdlcnJvcicpOw0KICAgIH0NCn0NCg0KLy8gQ3JlYXRlIGhpZ2hsaWdodGVkIGVkaXRvcg0KZnVuY3Rpb24gY3JlYXRlSGlnaGxpZ2h0ZWRFZGl0b3IoKSB7DQogICAgaWYgKCF0ZXh0RWRpdG9yLnByaXNtTG9hZGVkKSByZXR1cm47DQogICAgDQogICAgLy8gQ2xlYW4gdXAgYW55IGV4aXN0aW5nIGhpZ2hsaWdodGVkIHNldHVwDQogICAgY2xlYW51cEhpZ2hsaWdodGVkRWRpdG9yKCk7DQogICAgDQogICAgY29uc3QgZWRpdG9yV3JhcHBlciA9IHRleHRFZGl0b3IudGV4dGFyZWEucGFyZW50RWxlbWVudDsNCiAgICBjb25zdCB0ZXh0YXJlYSA9IHRleHRFZGl0b3IudGV4dGFyZWE7DQogICAgDQogICAgLy8gU3RvcmUgb3JpZ2luYWwgdGV4dGFyZWEgc3R5bGVzDQogICAgY29uc3Qgb3JpZ2luYWxTdHlsZXMgPSB7DQogICAgICAgIHBvc2l0aW9uOiB0ZXh0YXJlYS5zdHlsZS5wb3NpdGlvbiwNCiAgICAgICAgYmFja2dyb3VuZDogdGV4dGFyZWEuc3R5bGUuYmFja2dyb3VuZCwNCiAgICAgICAgY29sb3I6IHRleHRhcmVhLnN0eWxlLmNvbG9yLA0KICAgICAgICB6SW5kZXg6IHRleHRhcmVhLnN0eWxlLnpJbmRleCwNCiAgICAgICAgY2FyZXRDb2xvcjogdGV4dGFyZWEuc3R5bGUuY2FyZXRDb2xvciwNCiAgICAgICAgc3BlbGxjaGVjazogdGV4dGFyZWEuZ2V0QXR0cmlidXRlKCdzcGVsbGNoZWNrJyksDQogICAgICAgIGF1dG9jb21wbGV0ZTogdGV4dGFyZWEuZ2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnKSwNCiAgICAgICAgYXV0b2NvcnJlY3Q6IHRleHRhcmVhLmdldEF0dHJpYnV0ZSgnYXV0b2NvcnJlY3QnKSwNCiAgICAgICAgYXV0b2NhcGl0YWxpemU6IHRleHRhcmVhLmdldEF0dHJpYnV0ZSgnYXV0b2NhcGl0YWxpemUnKQ0KICAgIH07DQogICAgDQogICAgLy8gQ3JlYXRlIGEgY29udGFpbmVyIGZvciB0aGUgb3ZlcmxheSBhcHByb2FjaA0KICAgIGNvbnN0IGhpZ2hsaWdodENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgIGhpZ2hsaWdodENvbnRhaW5lci5jbGFzc05hbWUgPSAnaGlnaGxpZ2h0LWNvbnRhaW5lcic7DQogICAgaGlnaGxpZ2h0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJzsNCiAgICBoaWdobGlnaHRDb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7DQogICAgaGlnaGxpZ2h0Q29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJzsNCiAgICANCiAgICAvLyBDcmVhdGUgaGlnaGxpZ2h0ZWQgYmFja2Ryb3ANCiAgICBjb25zdCBoaWdobGlnaHRlZEJhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgaGlnaGxpZ2h0ZWRCYWNrZHJvcC5pZCA9ICdoaWdobGlnaHRlZC1iYWNrZHJvcCc7DQogICAgaGlnaGxpZ2h0ZWRCYWNrZHJvcC5jbGFzc05hbWUgPSAnaGlnaGxpZ2h0ZWQtYmFja2Ryb3AnOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUudG9wID0gJzAnOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUubGVmdCA9ICcwJzsNCiAgICBoaWdobGlnaHRlZEJhY2tkcm9wLnN0eWxlLndpZHRoID0gJzEwMCUnOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUuaGVpZ2h0ID0gJzEwMCUnOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJzsNCiAgICBoaWdobGlnaHRlZEJhY2tkcm9wLnN0eWxlLmZvbnRGYW1pbHkgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0ZXh0YXJlYSkuZm9udEZhbWlseTsNCiAgICBoaWdobGlnaHRlZEJhY2tkcm9wLnN0eWxlLmZvbnRTaXplID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGV4dGFyZWEpLmZvbnRTaXplOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUubGluZUhlaWdodCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRleHRhcmVhKS5saW5lSGVpZ2h0Ow0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUucGFkZGluZyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRleHRhcmVhKS5wYWRkaW5nOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUubWFyZ2luID0gJzAnOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUuYm9yZGVyID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGV4dGFyZWEpLmJvcmRlcjsNCiAgICBoaWdobGlnaHRlZEJhY2tkcm9wLnN0eWxlLndoaXRlU3BhY2UgPSAncHJlLXdyYXAnOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUud29yZFdyYXAgPSAnYnJlYWstd29yZCc7DQogICAgaGlnaGxpZ2h0ZWRCYWNrZHJvcC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUuekluZGV4ID0gJzEnOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUucmVzaXplID0gJ25vbmUnOw0KICAgIGhpZ2hsaWdodGVkQmFja2Ryb3Auc3R5bGUuY29sb3IgPSAnI2ZmZmZmZic7IC8vIERlZmF1bHQgdGV4dCBjb2xvciBmb3IgaGlnaGxpZ2h0aW5nDQogICAgDQogICAgLy8gTWFrZSBzdXJlIHRleHRhcmVhIGlzIG9uIHRvcCBhbmQgaGFzIHRyYW5zcGFyZW50IGJhY2tncm91bmQgYW5kIHRleHQNCiAgICB0ZXh0YXJlYS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7DQogICAgdGV4dGFyZWEuc3R5bGUuekluZGV4ID0gJzInOw0KICAgIHRleHRhcmVhLnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnOw0KICAgIHRleHRhcmVhLnN0eWxlLmNvbG9yID0gJ3RyYW5zcGFyZW50JzsNCiAgICB0ZXh0YXJlYS5zdHlsZS5jYXJldENvbG9yID0gJyNmZmZmZmYnOw0KICAgIA0KICAgIC8vIERpc2FibGUgYnJvd3NlciBzcGVsbCBjaGVja2luZyBmb3IgY29kZQ0KICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZSgnc3BlbGxjaGVjaycsICdmYWxzZScpOw0KICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZSgnYXV0b2NvbXBsZXRlJywgJ29mZicpOw0KICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZSgnYXV0b2NvcnJlY3QnLCAnb2ZmJyk7DQogICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKCdhdXRvY2FwaXRhbGl6ZScsICdvZmYnKTsNCiAgICANCiAgICAvLyBXcmFwIHRleHRhcmVhIGluIGNvbnRhaW5lcg0KICAgIGVkaXRvcldyYXBwZXIuaW5zZXJ0QmVmb3JlKGhpZ2hsaWdodENvbnRhaW5lciwgdGV4dGFyZWEpOw0KICAgIGhpZ2hsaWdodENvbnRhaW5lci5hcHBlbmRDaGlsZChoaWdobGlnaHRlZEJhY2tkcm9wKTsNCiAgICBoaWdobGlnaHRDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dGFyZWEpOw0KICAgIA0KICAgIHRleHRFZGl0b3IuaGlnaGxpZ2h0ZWRFZGl0b3IgPSBoaWdobGlnaHRlZEJhY2tkcm9wOw0KICAgIHRleHRFZGl0b3IuaGlnaGxpZ2h0Q29udGFpbmVyID0gaGlnaGxpZ2h0Q29udGFpbmVyOw0KICAgIHRleHRFZGl0b3Iub3JpZ2luYWxUZXh0YXJlYVN0eWxlcyA9IG9yaWdpbmFsU3R5bGVzOw0KICAgIHRleHRFZGl0b3Iuc3ludGF4SGlnaGxpZ2h0aW5nRW5hYmxlZCA9IHRydWU7DQogICAgDQogICAgLy8gU2V0IGluaXRpYWwgY29udGVudA0KICAgIHVwZGF0ZUhpZ2hsaWdodGVkQ29udGVudCgpOw0KICAgIA0KICAgIC8vIFNldCB1cCBzaW1wbGUgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSB0ZXh0YXJlYSAobm90IHRoZSBiYWNrZHJvcCkNCiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGhhbmRsZVNpbXBsZUlucHV0KTsNCiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzeW5jQmFja2Ryb3BTY3JvbGwpOw0KICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVIaWdobGlnaHRLZXlEb3duKTsNCiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUhpZ2hsaWdodENsaWNrKTsNCiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGhhbmRsZUhpZ2hsaWdodEZvY3VzKTsNCiAgICANCiAgICBjb25zb2xlLmxvZygn4pyFIEhpZ2hsaWdodGVkIGJhY2tkcm9wIGNyZWF0ZWQgKG92ZXJsYXkgbWV0aG9kKScpOw0KfQ0KDQoNCi8vIFVwZGF0ZSBoaWdobGlnaHRlZCBjb250ZW50DQpmdW5jdGlvbiB1cGRhdGVIaWdobGlnaHRlZENvbnRlbnQoKSB7DQogICAgaWYgKCF0ZXh0RWRpdG9yLmhpZ2hsaWdodGVkRWRpdG9yIHx8ICF0ZXh0RWRpdG9yLnByaXNtTG9hZGVkKSByZXR1cm47DQogICAgDQogICAgY29uc3QgY29udGVudCA9IHRleHRFZGl0b3IudGV4dGFyZWEudmFsdWU7DQogICAgY29uc3QgbGFuZ3VhZ2UgPSBnZXRGaWxlTGFuZ3VhZ2UodGV4dEVkaXRvci5maWxlUGF0aCk7DQogICAgDQogICAgaWYgKCFsYW5ndWFnZSkgew0KICAgICAgICAvLyBObyBsYW5ndWFnZSBkZXRlY3RlZCwgdXNlIHBsYWluIHRleHQNCiAgICAgICAgdGV4dEVkaXRvci5oaWdobGlnaHRlZEVkaXRvci50ZXh0Q29udGVudCA9IGNvbnRlbnQ7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgDQogICAgLy8gQXBwbHkgc3ludGF4IGhpZ2hsaWdodGluZyB0byBiYWNrZHJvcA0KICAgIGNvbnN0IGhpZ2hsaWdodGVkQ29udGVudCA9IFByaXNtLmhpZ2hsaWdodChjb250ZW50LCBQcmlzbS5sYW5ndWFnZXNbbGFuZ3VhZ2VdLCBsYW5ndWFnZSk7DQogICAgdGV4dEVkaXRvci5oaWdobGlnaHRlZEVkaXRvci5pbm5lckhUTUwgPSBoaWdobGlnaHRlZENvbnRlbnQ7DQogICAgDQogICAgLy8gU3luYyBzY3JvbGwgcG9zaXRpb24NCiAgICBzeW5jQmFja2Ryb3BTY3JvbGwoKTsNCiAgICANCiAgICBjb25zb2xlLmxvZygn4pyFIEJhY2tkcm9wIGhpZ2hsaWdodGluZyB1cGRhdGVkJyk7DQp9DQoNCi8vIEVuYWJsZSBzeW50YXggaGlnaGxpZ2h0aW5nIGZvciBzdXBwb3J0ZWQgZmlsZXMNCmFzeW5jIGZ1bmN0aW9uIGVuYWJsZVN5bnRheEhpZ2hsaWdodGluZygpIHsNCiAgICBpZiAoIXRleHRFZGl0b3Iuc2V0dGluZ3Muc3ludGF4SGlnaGxpZ2h0aW5nKSB7DQogICAgICAgIGNsZWFudXBIaWdobGlnaHRlZEVkaXRvcigpOw0KICAgICAgICB0ZXh0RWRpdG9yLnN5bnRheEhpZ2hsaWdodGluZ0VuYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICANCiAgICBjb25zdCBsYW5ndWFnZSA9IGdldEZpbGVMYW5ndWFnZSh0ZXh0RWRpdG9yLmZpbGVQYXRoKTsNCiAgICANCiAgICBpZiAobGFuZ3VhZ2UpIHsNCiAgICAgICAgaWYgKCF0ZXh0RWRpdG9yLnByaXNtTG9hZGVkKSB7DQogICAgICAgICAgICBhd2FpdCBsb2FkUHJpc21KUygpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZiAoIXRleHRFZGl0b3IuaGlnaGxpZ2h0ZWRFZGl0b3IpIHsNCiAgICAgICAgICAgIGNyZWF0ZUhpZ2hsaWdodGVkRWRpdG9yKCk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHRleHRFZGl0b3Iuc3ludGF4SGlnaGxpZ2h0aW5nRW5hYmxlZCA9IHRydWU7DQogICAgICAgIGNvbnNvbGUubG9nKGDinIUgU3ludGF4IGhpZ2hsaWdodGluZyBlbmFibGVkIGZvciAke2xhbmd1YWdlfSBmaWxlYCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgLy8gRGlzYWJsZSBoaWdobGlnaHRpbmcgZm9yIHVuc3VwcG9ydGVkIGZpbGVzDQogICAgICAgIGNsZWFudXBIaWdobGlnaHRlZEVkaXRvcigpOw0KICAgICAgICB0ZXh0RWRpdG9yLnN5bnRheEhpZ2hsaWdodGluZ0VuYWJsZWQgPSBmYWxzZTsNCiAgICB9DQp9DQoNCi8vIEhhbmRsZSBzaW1wbGUgaW5wdXQgZm9yIGJhY2tkcm9wIGFwcHJvYWNoDQpmdW5jdGlvbiBoYW5kbGVTaW1wbGVJbnB1dCgpIHsNCiAgICAvLyBVcGRhdGUgbGluZSBudW1iZXJzIGFuZCBzdGF0dXMgaW1tZWRpYXRlbHkNCiAgICB1cGRhdGVMaW5lTnVtYmVycygpOw0KICAgIHVwZGF0ZVN0YXR1cygpOw0KICAgIG1hcmtBc01vZGlmaWVkKCk7DQogICAgDQogICAgLy8gSW1tZWRpYXRlIGhpZ2hsaWdodGluZyB1cGRhdGUgZm9yIHJlc3BvbnNpdmUgZmVlbA0KICAgIHVwZGF0ZUhpZ2hsaWdodGVkQ29udGVudCgpOw0KICAgIA0KICAgIC8vIFNjaGVkdWxlIHZhbGlkYXRpb24gZm9yIFB5dGhvbiBmaWxlcw0KICAgIHNjaGVkdWxlVmFsaWRhdGlvbigpOw0KfQ0KDQovLyBIYW5kbGUga2V5IGV2ZW50cyB0aGF0IG1pZ2h0IGNoYW5nZSBjb250ZW50DQpmdW5jdGlvbiBoYW5kbGVIaWdobGlnaHRLZXlEb3duKGUpIHsNCiAgICAvLyBGb3Iga2V5cyB0aGF0IG1vZGlmeSBjb250ZW50LCB1cGRhdGUgaGlnaGxpZ2h0aW5nIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBldmVudA0KICAgIGlmIChlLmtleSA9PT0gJ1RhYicgfHwgZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICdCYWNrc3BhY2UnIHx8IGUua2V5ID09PSAnRGVsZXRlJykgew0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgIHVwZGF0ZUhpZ2hsaWdodGVkQ29udGVudCgpOw0KICAgICAgICB9LCAwKTsgLy8gVXBkYXRlIG9uIG5leHQgdGljayBhZnRlciB0aGUga2V5IGV2ZW50IGlzIHByb2Nlc3NlZA0KICAgIH0NCn0NCg0KLy8gSGFuZGxlIGNsaWNrIGV2ZW50cyAoY3Vyc29yIHBvc2l0aW9uIGNoYW5nZXMpDQpmdW5jdGlvbiBoYW5kbGVIaWdobGlnaHRDbGljaygpIHsNCiAgICAvLyBTeW5jIHNjcm9sbCBwb3NpdGlvbiB3aGVuIHVzZXIgY2xpY2tzDQogICAgc3luY0JhY2tkcm9wU2Nyb2xsKCk7DQp9DQoNCi8vIEhhbmRsZSBmb2N1cyBldmVudHMNCmZ1bmN0aW9uIGhhbmRsZUhpZ2hsaWdodEZvY3VzKCkgew0KICAgIC8vIEVuc3VyZSBoaWdobGlnaHRpbmcgaXMgaW4gc3luYyB3aGVuIHRleHRhcmVhIGdldHMgZm9jdXMNCiAgICB1cGRhdGVIaWdobGlnaHRlZENvbnRlbnQoKTsNCiAgICBzeW5jQmFja2Ryb3BTY3JvbGwoKTsNCn0NCg0KLy8gU3luYyBiYWNrZHJvcCBzY3JvbGwgd2l0aCB0ZXh0YXJlYQ0KZnVuY3Rpb24gc3luY0JhY2tkcm9wU2Nyb2xsKCkgew0KICAgIGlmICh0ZXh0RWRpdG9yLmhpZ2hsaWdodGVkRWRpdG9yKSB7DQogICAgICAgIHRleHRFZGl0b3IuaGlnaGxpZ2h0ZWRFZGl0b3Iuc2Nyb2xsVG9wID0gdGV4dEVkaXRvci50ZXh0YXJlYS5zY3JvbGxUb3A7DQogICAgICAgIHRleHRFZGl0b3IuaGlnaGxpZ2h0ZWRFZGl0b3Iuc2Nyb2xsTGVmdCA9IHRleHRFZGl0b3IudGV4dGFyZWEuc2Nyb2xsTGVmdDsNCiAgICB9DQp9DQoNCi8vIENsZWFuIHVwIGhpZ2hsaWdodGVkIGVkaXRvcg0KZnVuY3Rpb24gY2xlYW51cEhpZ2hsaWdodGVkRWRpdG9yKCkgew0KICAgIGlmICh0ZXh0RWRpdG9yLmhpZ2hsaWdodENvbnRhaW5lcikgew0KICAgICAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIHRleHRhcmVhIHN0eWxlcw0KICAgICAgICBpZiAodGV4dEVkaXRvci5vcmlnaW5hbFRleHRhcmVhU3R5bGVzKSB7DQogICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IHRleHRFZGl0b3IudGV4dGFyZWE7DQogICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZS5wb3NpdGlvbiA9IHRleHRFZGl0b3Iub3JpZ2luYWxUZXh0YXJlYVN0eWxlcy5wb3NpdGlvbjsNCiAgICAgICAgICAgIHRleHRhcmVhLnN0eWxlLmJhY2tncm91bmQgPSB0ZXh0RWRpdG9yLm9yaWdpbmFsVGV4dGFyZWFTdHlsZXMuYmFja2dyb3VuZDsNCiAgICAgICAgICAgIHRleHRhcmVhLnN0eWxlLmNvbG9yID0gdGV4dEVkaXRvci5vcmlnaW5hbFRleHRhcmVhU3R5bGVzLmNvbG9yOw0KICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUuekluZGV4ID0gdGV4dEVkaXRvci5vcmlnaW5hbFRleHRhcmVhU3R5bGVzLnpJbmRleDsNCiAgICAgICAgICAgIHRleHRhcmVhLnN0eWxlLmNhcmV0Q29sb3IgPSB0ZXh0RWRpdG9yLm9yaWdpbmFsVGV4dGFyZWFTdHlsZXMuY2FyZXRDb2xvcjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gUmVtb3ZlIHRoZSBjb250YWluZXIgYW5kIHJlc3RvcmUgdGV4dGFyZWEgdG8gaXRzIG9yaWdpbmFsIHBhcmVudA0KICAgICAgICBjb25zdCBlZGl0b3JXcmFwcGVyID0gdGV4dEVkaXRvci5oaWdobGlnaHRDb250YWluZXIucGFyZW50RWxlbWVudDsNCiAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB0ZXh0RWRpdG9yLnRleHRhcmVhOw0KICAgICAgICANCiAgICAgICAgLy8gTW92ZSB0ZXh0YXJlYSBiYWNrIHRvIGl0cyBvcmlnaW5hbCBsb2NhdGlvbg0KICAgICAgICBlZGl0b3JXcmFwcGVyLmluc2VydEJlZm9yZSh0ZXh0YXJlYSwgdGV4dEVkaXRvci5oaWdobGlnaHRDb250YWluZXIpOw0KICAgICAgICANCiAgICAgICAgLy8gUmVtb3ZlIHRoZSBoaWdobGlnaHQgY29udGFpbmVyDQogICAgICAgIHRleHRFZGl0b3IuaGlnaGxpZ2h0Q29udGFpbmVyLnJlbW92ZSgpOw0KICAgICAgICANCiAgICAgICAgLy8gQ2xlYXIgcmVmZXJlbmNlcw0KICAgICAgICB0ZXh0RWRpdG9yLmhpZ2hsaWdodENvbnRhaW5lciA9IG51bGw7DQogICAgICAgIHRleHRFZGl0b3IuaGlnaGxpZ2h0ZWRFZGl0b3IgPSBudWxsOw0KICAgICAgICB0ZXh0RWRpdG9yLm9yaWdpbmFsVGV4dGFyZWFTdHlsZXMgPSBudWxsOw0KICAgIH0NCn0NCg0KLy8gVG9nZ2xlIHN5bnRheCBoaWdobGlnaHRpbmcNCmFzeW5jIGZ1bmN0aW9uIHRvZ2dsZVN5bnRheEhpZ2hsaWdodGluZygpIHsNCiAgICB0ZXh0RWRpdG9yLnNldHRpbmdzLnN5bnRheEhpZ2hsaWdodGluZyA9ICF0ZXh0RWRpdG9yLnNldHRpbmdzLnN5bnRheEhpZ2hsaWdodGluZzsNCiAgICANCiAgICAvLyBTYXZlIHNldHRpbmcNCiAgICB0cnkgew0KICAgICAgICBhd2FpdCBzeXBuZXhBUEkuc2V0U2V0dGluZygnU1lOVEFYX0hJR0hMSUdIVElORycsIHRleHRFZGl0b3Iuc2V0dGluZ3Muc3ludGF4SGlnaGxpZ2h0aW5nKTsNCiAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBzeW50YXggaGlnaGxpZ2h0aW5nIHNldHRpbmc6JywgZXJyb3IpOw0KICAgIH0NCiAgICANCiAgICAvLyBVcGRhdGUgVUkNCiAgICBpZiAoc3ludGF4SGlnaGxpZ2h0aW5nVG9nZ2xlKSB7DQogICAgICAgIHN5bnRheEhpZ2hsaWdodGluZ1RvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCB0ZXh0RWRpdG9yLnNldHRpbmdzLnN5bnRheEhpZ2hsaWdodGluZyk7DQogICAgfQ0KICAgIA0KICAgIC8vIEFwcGx5IG9yIGRpc2FibGUgaGlnaGxpZ2h0aW5nDQogICAgaWYgKHRleHRFZGl0b3Iuc2V0dGluZ3Muc3ludGF4SGlnaGxpZ2h0aW5nKSB7DQogICAgICAgIGF3YWl0IGVuYWJsZVN5bnRheEhpZ2hsaWdodGluZygpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIC8vIERpc2FibGUgaGlnaGxpZ2h0aW5nDQogICAgICAgIGNsZWFudXBIaWdobGlnaHRlZEVkaXRvcigpOw0KICAgICAgICB0ZXh0RWRpdG9yLnN5bnRheEhpZ2hsaWdodGluZ0VuYWJsZWQgPSBmYWxzZTsNCiAgICB9DQogICAgDQogICAgc3lwbmV4QVBJLnNob3dOb3RpZmljYXRpb24oDQogICAgICAgIGBTeW50YXggaGlnaGxpZ2h0aW5nICR7dGV4dEVkaXRvci5zZXR0aW5ncy5zeW50YXhIaWdobGlnaHRpbmcgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnfWAsDQogICAgICAgICdpbmZvJw0KICAgICk7DQp9DQoNCg0KLy8gTG9hZCBQeW9kaWRlIGZvciBQeXRob24gc3ludGF4IHZhbGlkYXRpb24NCmFzeW5jIGZ1bmN0aW9uIGxvYWRQeW9kaWRlKCkgew0KICAgIGNvbnNvbGUubG9nKCfwn5OmIGxvYWRQeW9kaWRlIGNhbGxlZCwgY3VycmVudCBzdGF0ZTonLCB0ZXh0RWRpdG9yLnB5b2RpZGVMb2FkZWQpOw0KICAgIA0KICAgIGlmICh0ZXh0RWRpdG9yLnB5b2RpZGVMb2FkZWQgJiYgd2luZG93LnB5b2RpZGUpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ+KchSBQeW9kaWRlIGFscmVhZHkgbG9hZGVkLCByZXR1cm5pbmcgZXhpc3RpbmcgaW5zdGFuY2UnKTsNCiAgICAgICAgcmV0dXJuIHdpbmRvdy5weW9kaWRlOw0KICAgIH0NCiAgICANCiAgICB0cnkgew0KICAgICAgICBjb25zb2xlLmxvZygn8J+agCBTdGFydGluZyBQeW9kaWRlIGxvYWRpbmcgcHJvY2Vzcy4uLicpOw0KICAgICAgICANCiAgICAgICAgLy8gTG9hZCBQeW9kaWRlIHNjcmlwdA0KICAgICAgICBhd2FpdCBzeXBuZXhBUEkubG9hZExpYnJhcnkoJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9weW9kaWRlL3YwLjI0LjEvZnVsbC9weW9kaWRlLmpzJywgew0KICAgICAgICAgICAgbG9jYWxOYW1lOiAnbG9hZFB5b2RpZGUnDQogICAgICAgIH0pOw0KICAgICAgICANCiAgICAgICAgY29uc29sZS5sb2coJ/Cfk5ogUHlvZGlkZSBsaWJyYXJ5IGxvYWRlZCwgaW5pdGlhbGl6aW5nIGluc3RhbmNlLi4uJyk7DQogICAgICAgIA0KICAgICAgICAvLyBJbml0aWFsaXplIFB5b2RpZGUgLSB1c2UgdGhlIGdsb2JhbCBsb2FkUHlvZGlkZSBmdW5jdGlvbg0KICAgICAgICB3aW5kb3cucHlvZGlkZSA9IGF3YWl0IHdpbmRvdy5sb2FkUHlvZGlkZSh7DQogICAgICAgICAgICBpbmRleFVSTDogImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9weW9kaWRlL3YwLjI0LjEvZnVsbC8iDQogICAgICAgIH0pOw0KICAgICAgICANCiAgICAgICAgY29uc29sZS5sb2coJ/CfkI0gUHlvZGlkZSBpbml0aWFsaXplZCwgaW5zdGFsbGluZyBQeXRob24gdmFsaWRhdGlvbiBmdW5jdGlvbi4uLicpOw0KICAgICAgICANCiAgICAgICAgLy8gSW5zdGFsbCB2YWxpZGF0aW9uIGZ1bmN0aW9uDQogICAgICAgIHdpbmRvdy5weW9kaWRlLnJ1blB5dGhvbihgDQppbXBvcnQgYXN0DQoNCmRlZiB2YWxpZGF0ZV9weXRob25fc3ludGF4KGNvZGUpOg0KICAgICIiIlZhbGlkYXRlIFB5dGhvbiBzeW50YXggYW5kIHJldHVybiBlcnJvcnMiIiINCiAgICB0cnk6DQogICAgICAgICMgVHJ5IHRvIHBhcnNlIHRoZSBjb2RlIGFzIGFuIEFTVA0KICAgICAgICBhc3QucGFyc2UoY29kZSkNCiAgICAgICAgcmV0dXJuIHsidmFsaWQiOiBUcnVlLCAiZXJyb3JzIjogW119DQogICAgZXhjZXB0IFN5bnRheEVycm9yIGFzIGU6DQogICAgICAgIGVycm9yX2luZm8gPSB7DQogICAgICAgICAgICAibGluZSI6IGUubGluZW5vIG9yIDEsDQogICAgICAgICAgICAiY29sdW1uIjogZS5vZmZzZXQgb3IgMSwgDQogICAgICAgICAgICAibWVzc2FnZSI6IGUubXNnIG9yICJTeW50YXggZXJyb3IiLA0KICAgICAgICAgICAgInR5cGUiOiAic3ludGF4Ig0KICAgICAgICB9DQogICAgICAgIHJldHVybiB7InZhbGlkIjogRmFsc2UsICJlcnJvcnMiOiBbZXJyb3JfaW5mb119DQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBlcnJvcl9pbmZvID0gew0KICAgICAgICAgICAgImxpbmUiOiAxLA0KICAgICAgICAgICAgImNvbHVtbiI6IDEsDQogICAgICAgICAgICAibWVzc2FnZSI6IHN0cihlKSwNCiAgICAgICAgICAgICJ0eXBlIjogImdlbmVyYWwiDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHsidmFsaWQiOiBGYWxzZSwgImVycm9ycyI6IFtlcnJvcl9pbmZvXX0NCiAgICAgICAgYCk7DQogICAgICAgIA0KICAgICAgICB0ZXh0RWRpdG9yLnB5b2RpZGVMb2FkZWQgPSB0cnVlOw0KICAgICAgICBjb25zb2xlLmxvZygn4pyFIFB5b2RpZGUgbG9hZGVkIGFuZCBjb25maWd1cmVkIHN1Y2Nlc3NmdWxseSEnKTsNCiAgICAgICAgDQogICAgICAgIC8vIFNob3cgbm90aWZpY2F0aW9uDQogICAgICAgIHN5cG5leEFQSS5zaG93Tm90aWZpY2F0aW9uKCdQeXRob24gdmFsaWRhdGlvbiByZWFkeSEnLCAnc3VjY2VzcycpOw0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHdpbmRvdy5weW9kaWRlOw0KICAgICAgICANCiAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGxvYWQgUHlvZGlkZTonLCBlcnJvcik7DQogICAgICAgIHN5cG5leEFQSS5zaG93Tm90aWZpY2F0aW9uKCdGYWlsZWQgdG8gbG9hZCBQeXRob24gdmFsaWRhdGlvbjogJyArIGVycm9yLm1lc3NhZ2UsICdlcnJvcicpOw0KICAgICAgICB0aHJvdyBlcnJvcjsNCiAgICB9DQp9DQoNCi8vIFZhbGlkYXRlIFB5dGhvbiBzeW50YXggdXNpbmcgUHlvZGlkZQ0KYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVQeXRob25TeW50YXgoY29kZSkgew0KICAgIGNvbnNvbGUubG9nKCfwn5SsIHZhbGlkYXRlUHl0aG9uU3ludGF4IGNhbGxlZCcpOw0KICAgIGNvbnNvbGUubG9nKCdWYWxpZGF0aW9uIGVuYWJsZWQ6JywgdGV4dEVkaXRvci52YWxpZGF0aW9uRW5hYmxlZCk7DQogICAgDQogICAgaWYgKCF0ZXh0RWRpdG9yLnZhbGlkYXRpb25FbmFibGVkKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCfinYwgVmFsaWRhdGlvbiBkaXNhYmxlZCAtIHJldHVybmluZyB2YWxpZCcpOw0KICAgICAgICByZXR1cm4geyJ2YWxpZCI6IHRydWUsICJlcnJvcnMiOiBbXX07DQogICAgfQ0KICAgIA0KICAgIHRyeSB7DQogICAgICAgIGNvbnNvbGUubG9nKCfwn5OmIExvYWRpbmcgUHlvZGlkZS4uLicpOw0KICAgICAgICBjb25zdCBweW9kaWRlID0gYXdhaXQgbG9hZFB5b2RpZGUoKTsNCiAgICAgICAgY29uc29sZS5sb2coJ+KchSBQeW9kaWRlIGxvYWRlZCwgdmFsaWRhdGluZyBjb2RlLi4uJyk7DQogICAgICAgIA0KICAgICAgICAvLyBDYWxsIHRoZSBQeXRob24gdmFsaWRhdGlvbiBmdW5jdGlvbg0KICAgICAgICBweW9kaWRlLmdsb2JhbHMuc2V0KCJjb2RlX3RvX3ZhbGlkYXRlIiwgY29kZSk7DQogICAgICAgIGNvbnN0IHJlc3VsdCA9IHB5b2RpZGUucnVuUHl0aG9uKCJ2YWxpZGF0ZV9weXRob25fc3ludGF4KGNvZGVfdG9fdmFsaWRhdGUpIik7DQogICAgICAgIA0KICAgICAgICBjb25zdCBqc1Jlc3VsdCA9IHJlc3VsdC50b0pzKHtkaWN0X2NvbnZlcnRlcjogT2JqZWN0LmZyb21FbnRyaWVzfSk7DQogICAgICAgIGNvbnNvbGUubG9nKCfwn46vIFB5dGhvbiB2YWxpZGF0aW9uIHJlc3VsdDonLCBqc1Jlc3VsdCk7DQogICAgICAgIA0KICAgICAgICByZXR1cm4ganNSZXN1bHQ7DQogICAgICAgIA0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBQeW9kaWRlIHZhbGlkYXRpb24gZXJyb3I6JywgZXJyb3IpOw0KICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBGYWxsaW5nIGJhY2sgdG8gYmFzaWMgc3ludGF4IHZhbGlkYXRpb24uLi4nKTsNCiAgICAgICAgDQogICAgICAgIC8vIEZhbGxiYWNrIHRvIGJhc2ljIGNsaWVudC1zaWRlIHZhbGlkYXRpb24NCiAgICAgICAgcmV0dXJuIHZhbGlkYXRlUHl0aG9uQmFzaWMoY29kZSk7DQogICAgfQ0KfQ0KDQovLyBCYXNpYyBQeXRob24gc3ludGF4IHZhbGlkYXRpb24gKGZhbGxiYWNrKQ0KZnVuY3Rpb24gdmFsaWRhdGVQeXRob25CYXNpYyhjb2RlKSB7DQogICAgY29uc29sZS5sb2coJ/CflKcgVXNpbmcgYmFzaWMgUHl0aG9uIHZhbGlkYXRpb24gZmFsbGJhY2snKTsNCiAgICBjb25zdCBlcnJvcnMgPSBbXTsNCiAgICBjb25zdCBsaW5lcyA9IGNvZGUuc3BsaXQoJ1xuJyk7DQogICAgDQogICAgbGluZXMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHsNCiAgICAgICAgY29uc3QgbGluZU51bSA9IGluZGV4ICsgMTsNCiAgICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpOw0KICAgICAgICANCiAgICAgICAgLy8gU2tpcCBlbXB0eSBsaW5lcyBhbmQgY29tbWVudHMNCiAgICAgICAgaWYgKCF0cmltbWVkIHx8IHRyaW1tZWQuc3RhcnRzV2l0aCgnIycpKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICAvLyBDaGVjayBmb3IgdW50ZXJtaW5hdGVkIHN0cmluZ3MgKG1vcmUgYWNjdXJhdGUpDQogICAgICAgIGxldCBpblN0cmluZyA9IGZhbHNlOw0KICAgICAgICBsZXQgc3RyaW5nQ2hhciA9IG51bGw7DQogICAgICAgIGxldCBlc2NhcGVkID0gZmFsc2U7DQogICAgICAgIA0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaW1tZWQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0cmltbWVkW2ldOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoZXNjYXBlZCkgew0KICAgICAgICAgICAgICAgIGVzY2FwZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcXCcpIHsNCiAgICAgICAgICAgICAgICBlc2NhcGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCFpblN0cmluZyAmJiAoY2hhciA9PT0gJyInIHx8IGNoYXIgPT09ICInIikpIHsNCiAgICAgICAgICAgICAgICBpblN0cmluZyA9IHRydWU7DQogICAgICAgICAgICAgICAgc3RyaW5nQ2hhciA9IGNoYXI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGluU3RyaW5nICYmIGNoYXIgPT09IHN0cmluZ0NoYXIpIHsNCiAgICAgICAgICAgICAgICBpblN0cmluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHN0cmluZ0NoYXIgPSBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZiAoaW5TdHJpbmcpIHsNCiAgICAgICAgICAgIGVycm9ycy5wdXNoKHsNCiAgICAgICAgICAgICAgICBsaW5lOiBsaW5lTnVtLA0KICAgICAgICAgICAgICAgIGNvbHVtbjogMSwNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAiVW50ZXJtaW5hdGVkIHN0cmluZyBsaXRlcmFsIiwNCiAgICAgICAgICAgICAgICB0eXBlOiAic3ludGF4Ig0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIGZvciBtaXNzaW5nIGNvbG9ucyBhZnRlciBjb250cm9sIHN0cnVjdHVyZXMgKG1vcmUgcHJlY2lzZSkNCiAgICAgICAgY29uc3QgY29udHJvbFN0cnVjdHVyZXMgPSAvXihpZnxlbGlmfGVsc2V8Zm9yfHdoaWxlfGRlZnxjbGFzc3x0cnl8ZXhjZXB0fGZpbmFsbHl8d2l0aHxhc3luY1xzK2RlZilccy87DQogICAgICAgIGlmIChjb250cm9sU3RydWN0dXJlcy50ZXN0KHRyaW1tZWQpICYmICF0cmltbWVkLmVuZHNXaXRoKCc6JykgJiYgIXRyaW1tZWQuaW5jbHVkZXMoJyMnKSkgew0KICAgICAgICAgICAgZXJyb3JzLnB1c2goew0KICAgICAgICAgICAgICAgIGxpbmU6IGxpbmVOdW0sDQogICAgICAgICAgICAgICAgY29sdW1uOiB0cmltbWVkLmxlbmd0aCwNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAiTWlzc2luZyBjb2xvbiIsDQogICAgICAgICAgICAgICAgdHlwZTogInN5bnRheCINCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBDaGVjayBmb3IgYmFzaWMgaW5kZW50YXRpb24gZXJyb3JzICh2ZXJ5IGJhc2ljKQ0KICAgICAgICBpZiAodHJpbW1lZC5tYXRjaCgvXihyZXR1cm58YnJlYWt8Y29udGludWV8cGFzc3xyYWlzZXx5aWVsZClccy8pICYmIGxpbmUgIT09IHRyaW1tZWQpIHsNCiAgICAgICAgICAgIC8vIFRoZXNlIGtleXdvcmRzIHNob3VsZCB0eXBpY2FsbHkgYmUgYXQgcHJvcGVyIGluZGVudGF0aW9uIGxldmVscw0KICAgICAgICAgICAgLy8gQnV0IHRoaXMgaXMgdG9vIGNvbXBsZXggZm9yIGJhc2ljIHZhbGlkYXRpb24sIHNvIHNraXAgaXQNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gT25seSBjaGVjayBwYXJlbnRoZXNlcyBvbiBsaW5lcyB0aGF0IHNlZW0gdG8gaGF2ZSBmdW5jdGlvbiBjYWxscyBvciBkZWZpbml0aW9ucw0KICAgICAgICBpZiAodHJpbW1lZC5pbmNsdWRlcygnKCcpIHx8IHRyaW1tZWQuaW5jbHVkZXMoJyknKSkgew0KICAgICAgICAgICAgY29uc3Qgb3BlblBhcmVucyA9ICh0cmltbWVkLm1hdGNoKC9cKC9nKSB8fCBbXSkubGVuZ3RoOw0KICAgICAgICAgICAgY29uc3QgY2xvc2VQYXJlbnMgPSAodHJpbW1lZC5tYXRjaCgvXCkvZykgfHwgW10pLmxlbmd0aDsNCiAgICAgICAgICAgIGlmIChvcGVuUGFyZW5zICE9PSBjbG9zZVBhcmVucykgew0KICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgbGluZTogbGluZU51bSwNCiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiAxLA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiVW5tYXRjaGVkIHBhcmVudGhlc2VzIiwNCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN5bnRheCINCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0pOw0KICAgIA0KICAgIGNvbnNvbGUubG9nKGDwn46vIEJhc2ljIHZhbGlkYXRpb24gZm91bmQgJHtlcnJvcnMubGVuZ3RofSBlcnJvcnNgKTsNCiAgICByZXR1cm4gew0KICAgICAgICB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwNCiAgICAgICAgZXJyb3JzOiBlcnJvcnMNCiAgICB9Ow0KfQ0KDQoNCi8vIFNjaGVkdWxlIHZhbGlkYXRpb24gd2l0aCBkZWJvdW5jaW5nDQpmdW5jdGlvbiBzY2hlZHVsZVZhbGlkYXRpb24oKSB7DQogICAgY29uc29sZS5sb2coJ/CflI0gc2NoZWR1bGVWYWxpZGF0aW9uIGNhbGxlZCcpOw0KICAgIGNvbnNvbGUubG9nKCdDdXJyZW50IGZpbGUgcGF0aDonLCB0ZXh0RWRpdG9yLmZpbGVQYXRoKTsNCiAgICBjb25zb2xlLmxvZygnSXMgUHl0aG9uIGZpbGU6JywgaXNQeXRob25GaWxlKHRleHRFZGl0b3IuZmlsZVBhdGgpKTsNCiAgICBjb25zb2xlLmxvZygnVmFsaWRhdGlvbiBlbmFibGVkOicsIHRleHRFZGl0b3IudmFsaWRhdGlvbkVuYWJsZWQpOw0KICAgIA0KICAgIC8vIENsZWFyIGV4aXN0aW5nIHRpbWVyDQogICAgaWYgKHRleHRFZGl0b3IudmFsaWRhdGlvbkRlYm91bmNlVGltZXIpIHsNCiAgICAgICAgY2xlYXJUaW1lb3V0KHRleHRFZGl0b3IudmFsaWRhdGlvbkRlYm91bmNlVGltZXIpOw0KICAgIH0NCiAgICANCiAgICAvLyBPbmx5IHZhbGlkYXRlIFB5dGhvbiBmaWxlcw0KICAgIGlmICghaXNQeXRob25GaWxlKHRleHRFZGl0b3IuZmlsZVBhdGgpIHx8ICF0ZXh0RWRpdG9yLnZhbGlkYXRpb25FbmFibGVkKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCfinYwgU2tpcHBpbmcgdmFsaWRhdGlvbiAtIG5vdCBQeXRob24gZmlsZSBvciB2YWxpZGF0aW9uIGRpc2FibGVkJyk7DQogICAgICAgIGNsZWFyRXJyb3JNYXJrZXJzKCk7DQogICAgICAgIHVwZGF0ZUVycm9yQ291bnQoMCk7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgDQogICAgY29uc29sZS5sb2coJ+KchSBTY2hlZHVsaW5nIFB5dGhvbiB2YWxpZGF0aW9uLi4uJyk7DQogICAgDQogICAgLy8gRGVib3VuY2UgdmFsaWRhdGlvbiB0byBhdm9pZCB0b28gZnJlcXVlbnQgY2FsbHMgYW5kIGludGVyZmVyZW5jZSB3aXRoIHR5cGluZw0KICAgIHRleHRFZGl0b3IudmFsaWRhdGlvbkRlYm91bmNlVGltZXIgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgY29uc3QgY29kZSA9IHRleHRFZGl0b3IudGV4dGFyZWEudmFsdWU7DQogICAgICAgIGNvbnNvbGUubG9nKCfwn5CNIEFib3V0IHRvIHZhbGlkYXRlIFB5dGhvbiBjb2RlOicsIGNvZGUuc3Vic3RyaW5nKDAsIDEwMCkgKyAnLi4uJyk7DQogICAgICAgIA0KICAgICAgICAvLyBEb24ndCB2YWxpZGF0ZSBlbXB0eSBmaWxlcw0KICAgICAgICBpZiAoIWNvZGUudHJpbSgpKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygn8J+TnSBFbXB0eSBjb2RlIC0gY2xlYXJpbmcgZXJyb3JzJyk7DQogICAgICAgICAgICBjbGVhckVycm9yTWFya2VycygpOw0KICAgICAgICAgICAgdXBkYXRlRXJyb3JDb3VudCgwKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5qAIENhbGxpbmcgdmFsaWRhdGVQeXRob25TeW50YXguLi4nKTsNCiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZhbGlkYXRlUHl0aG9uU3ludGF4KGNvZGUpOw0KICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfk4ogVmFsaWRhdGlvbiByZXN1bHQ6JywgcmVzdWx0KTsNCiAgICAgICAgICAgIGRpc3BsYXlWYWxpZGF0aW9uRXJyb3JzKHJlc3VsdC5lcnJvcnMgfHwgW10pOw0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFZhbGlkYXRpb24gc2NoZWR1bGluZyBlcnJvcjonLCBlcnJvcik7DQogICAgICAgIH0NCiAgICB9LCAxMDAwKTsgLy8gMTAwMG1zIGRlbGF5IC0gbXVjaCBsb25nZXIgdG8gYXZvaWQgaW50ZXJmZXJpbmcgd2l0aCBmYXN0IHR5cGluZw0KfQ0KDQovLyBEaXNwbGF5IHZhbGlkYXRpb24gZXJyb3JzIGluIHRoZSBlZGl0b3INCmZ1bmN0aW9uIGRpc3BsYXlWYWxpZGF0aW9uRXJyb3JzKGVycm9ycykgew0KICAgIC8vIENsZWFyIHByZXZpb3VzIGVycm9ycw0KICAgIGNsZWFyRXJyb3JNYXJrZXJzKCk7DQogICAgDQogICAgLy8gU3RvcmUgY3VycmVudCBlcnJvcnMNCiAgICB0ZXh0RWRpdG9yLmN1cnJlbnRFcnJvcnMgPSBlcnJvcnM7DQogICAgDQogICAgLy8gVXBkYXRlIGVycm9yIGNvdW50DQogICAgdXBkYXRlRXJyb3JDb3VudChlcnJvcnMubGVuZ3RoKTsNCiAgICANCiAgICAvLyBBZGQgZXJyb3IgbWFya2Vycw0KICAgIGVycm9ycy5mb3JFYWNoKGVycm9yID0+IHsNCiAgICAgICAgYWRkRXJyb3JNYXJrZXIoZXJyb3IubGluZSwgZXJyb3IubWVzc2FnZSwgZXJyb3IudHlwZSk7DQogICAgfSk7DQogICAgDQogICAgY29uc29sZS5sb2coYFZhbGlkYXRpb24gY29tcGxldGU6ICR7ZXJyb3JzLmxlbmd0aH0gZXJyb3JzIGZvdW5kYCk7DQp9DQoNCg0KLy8gQWRkIGVycm9yIG1hcmtlciB0byBhIHNwZWNpZmljIGxpbmUNCmZ1bmN0aW9uIGFkZEVycm9yTWFya2VyKGxpbmVOdW1iZXIsIG1lc3NhZ2UsIHR5cGUgPSAnc3ludGF4Jykgew0KICAgIGlmICghdGV4dEVkaXRvci5saW5lTnVtYmVycyB8fCBsaW5lTnVtYmVyIDwgMSkgcmV0dXJuOw0KICAgIA0KICAgIC8vIEZpbmQgdGhlIGxpbmUgbnVtYmVyIGVsZW1lbnQNCiAgICBjb25zdCBsaW5lTnVtYmVyRWxlbWVudHMgPSB0ZXh0RWRpdG9yLmxpbmVOdW1iZXJzLmNoaWxkcmVuOw0KICAgIGNvbnN0IGxpbmVJbmRleCA9IGxpbmVOdW1iZXIgLSAxOyAvLyBDb252ZXJ0IHRvIDAtYmFzZWQgaW5kZXgNCiAgICANCiAgICBpZiAobGluZUluZGV4IDwgbGluZU51bWJlckVsZW1lbnRzLmxlbmd0aCkgew0KICAgICAgICBjb25zdCBsaW5lRWwgPSBsaW5lTnVtYmVyRWxlbWVudHNbbGluZUluZGV4XTsNCiAgICAgICAgDQogICAgICAgIC8vIEFkZCBlcnJvciBjbGFzcw0KICAgICAgICBsaW5lRWwuY2xhc3NMaXN0LmFkZCgnbGluZS1lcnJvcicpOw0KICAgICAgICBsaW5lRWwudGl0bGUgPSBgTGluZSAke2xpbmVOdW1iZXJ9OiAke21lc3NhZ2V9YDsNCiAgICAgICAgDQogICAgICAgIC8vIFN0b3JlIGVycm9yIGluZm8gZm9yIGNsZWFudXANCiAgICAgICAgdGV4dEVkaXRvci5lcnJvck1hcmtlcnMucHVzaChsaW5lRWwpOw0KICAgIH0NCiAgICANCiAgICAvLyBBbHNvIHRyeSB0byBhZGQgdW5kZXJsaW5lIHRvIHRoZSB0ZXh0IGlmIHVzaW5nIGhpZ2hsaWdodGVkIGVkaXRvcg0KICAgIGlmICh0ZXh0RWRpdG9yLmhpZ2hsaWdodGVkRWRpdG9yKSB7DQogICAgICAgIGFkZEVycm9yVW5kZXJsaW5lKGxpbmVOdW1iZXIsIG1lc3NhZ2UpOw0KICAgIH0NCn0NCg0KLy8gQWRkIGVycm9yIHVuZGVybGluZSB0byBoaWdobGlnaHRlZCBlZGl0b3IgKGJhc2ljIGltcGxlbWVudGF0aW9uKQ0KZnVuY3Rpb24gYWRkRXJyb3JVbmRlcmxpbmUobGluZU51bWJlciwgbWVzc2FnZSkgew0KICAgIC8vIFRoaXMgaXMgYSBzaW1wbGlmaWVkIHZlcnNpb24gLSB3ZSBjb3VsZCBtYWtlIGl0IG1vcmUgc29waGlzdGljYXRlZA0KICAgIC8vIEZvciBub3csIHdlJ2xsIHJlbHkgb24gdGhlIGxpbmUgbnVtYmVyIGhpZ2hsaWdodGluZw0KICAgIGNvbnNvbGUubG9nKGBFcnJvciBvbiBsaW5lICR7bGluZU51bWJlcn06ICR7bWVzc2FnZX1gKTsNCn0NCg0KLy8gQ2xlYXIgYWxsIGVycm9yIG1hcmtlcnMNCmZ1bmN0aW9uIGNsZWFyRXJyb3JNYXJrZXJzKCkgew0KICAgIC8vIENsZWFyIGxpbmUgbnVtYmVyIGVycm9yIGNsYXNzZXMNCiAgICB0ZXh0RWRpdG9yLmVycm9yTWFya2Vycy5mb3JFYWNoKGxpbmVFbCA9PiB7DQogICAgICAgIGxpbmVFbC5jbGFzc0xpc3QucmVtb3ZlKCdsaW5lLWVycm9yJyk7DQogICAgICAgIGxpbmVFbC5yZW1vdmVBdHRyaWJ1dGUoJ3RpdGxlJyk7DQogICAgfSk7DQogICAgDQogICAgdGV4dEVkaXRvci5lcnJvck1hcmtlcnMgPSBbXTsNCiAgICB0ZXh0RWRpdG9yLmN1cnJlbnRFcnJvcnMgPSBbXTsNCn0NCg0KLy8gVXBkYXRlIGVycm9yIGNvdW50IGluIHN0YXR1cyBiYXINCmZ1bmN0aW9uIHVwZGF0ZUVycm9yQ291bnQoY291bnQpIHsNCiAgICBpZiAoZXJyb3JDb3VudEVsKSB7DQogICAgICAgIGVycm9yQ291bnRFbC50ZXh0Q29udGVudCA9IGNvdW50LnRvU3RyaW5nKCk7DQogICAgICAgIGVycm9yQ291bnRFbC5zdHlsZS5jb2xvciA9IGNvdW50ID4gMCA/ICcjZmY2YjZiJyA6ICcjNTFjZjY2JzsNCiAgICB9DQp9DQoNCi8vID09PT09IElOVEVHUkFURUQgVEVSTUlOQUwgRlVOQ1RJT05BTElUWSA9PT09PQ0KDQovLyBUZXJtaW5hbCB2YXJpYWJsZXMNCmxldCB0ZXJtaW5hbFRvZ2dsZSwgaW50ZWdyYXRlZFRlcm1pbmFsLCB0ZXJtaW5hbE91dHB1dCwgdGVybWluYWxJbnB1dCwgdGVybWluYWxSZXNpemU7DQpsZXQgdGVybWluYWxIaXN0b3J5ID0gW107DQpsZXQgdGVybWluYWxIaXN0b3J5SW5kZXggPSAtMTsNCmxldCB0ZXJtaW5hbFNvY2tldCA9IG51bGw7DQoNCi8vIEluaXRpYWxpemUgdGVybWluYWwgZnVuY3Rpb25hbGl0eQ0KZnVuY3Rpb24gaW5pdEludGVncmF0ZWRUZXJtaW5hbCgpIHsNCiAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIGludGVncmF0ZWQgdGVybWluYWwuLi4nKTsNCiAgICANCiAgICAvLyBHZXQgdGVybWluYWwgRE9NIGVsZW1lbnRzDQogICAgdGVybWluYWxUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVybWluYWwtdG9nZ2xlJyk7DQogICAgaW50ZWdyYXRlZFRlcm1pbmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ludGVncmF0ZWQtdGVybWluYWwnKTsNCiAgICB0ZXJtaW5hbE91dHB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXJtaW5hbE91dHB1dCcpOw0KICAgIHRlcm1pbmFsSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVybWluYWxJbnB1dCcpOw0KICAgIHRlcm1pbmFsUmVzaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlcm1pbmFsLXJlc2l6ZScpOw0KICAgIA0KICAgIGlmICghdGVybWluYWxUb2dnbGUgfHwgIWludGVncmF0ZWRUZXJtaW5hbCB8fCAhdGVybWluYWxPdXRwdXQgfHwgIXRlcm1pbmFsSW5wdXQpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcignVGVybWluYWwgZWxlbWVudHMgbm90IGZvdW5kJyk7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgDQogICAgLy8gU2V0IHVwIHRlcm1pbmFsIGV2ZW50IGhhbmRsZXJzDQogICAgc2V0dXBUZXJtaW5hbEV2ZW50SGFuZGxlcnMoKTsNCiAgICANCiAgICAvLyBDb25uZWN0IHRvIFdlYlNvY2tldCBmb3IgcmVhbC10aW1lIG91dHB1dA0KICAgIGNvbm5lY3RUZXJtaW5hbFdlYlNvY2tldCgpOw0KICAgIA0KICAgIGNvbnNvbGUubG9nKCdJbnRlZ3JhdGVkIHRlcm1pbmFsIGluaXRpYWxpemVkJyk7DQp9DQoNCi8vIFNldCB1cCB0ZXJtaW5hbCBldmVudCBoYW5kbGVycw0KZnVuY3Rpb24gc2V0dXBUZXJtaW5hbEV2ZW50SGFuZGxlcnMoKSB7DQogICAgLy8gVGVybWluYWwgdG9nZ2xlIGJ1dHRvbg0KICAgIHRlcm1pbmFsVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlVGVybWluYWwpOw0KICAgIA0KICAgIC8vIFRlcm1pbmFsIGlucHV0IGhhbmRsaW5nDQogICAgdGVybWluYWxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlVGVybWluYWxLZXlEb3duKTsNCiAgICANCiAgICAvLyBUZXJtaW5hbCByZXNpemUgZnVuY3Rpb25hbGl0eQ0KICAgIGlmICh0ZXJtaW5hbFJlc2l6ZSkgew0KICAgICAgICB0ZXJtaW5hbFJlc2l6ZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzdGFydFRlcm1pbmFsUmVzaXplKTsNCiAgICB9DQogICAgDQogICAgLy8gTWFrZSB0ZXJtaW5hbCBvdXRwdXQgZm9jdXNhYmxlIGZvciBjb3B5L3Bhc3RlDQogICAgdGVybWluYWxPdXRwdXQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7DQogICAgdGVybWluYWxPdXRwdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZVRlcm1pbmFsT3V0cHV0S2V5RG93bik7DQp9DQoNCi8vIFRvZ2dsZSB0ZXJtaW5hbCB2aXNpYmlsaXR5DQphc3luYyBmdW5jdGlvbiB0b2dnbGVUZXJtaW5hbCgpIHsNCiAgICBjb25zdCBpc1Zpc2libGUgPSAhaW50ZWdyYXRlZFRlcm1pbmFsLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJyk7DQogICAgDQogICAgaWYgKGlzVmlzaWJsZSkgew0KICAgICAgICBpbnRlZ3JhdGVkVGVybWluYWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7DQogICAgICAgIHRlcm1pbmFsVG9nZ2xlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOw0KICAgICAgICBhd2FpdCBzeXBuZXhBUEkuc2V0U2V0dGluZygnVEVSTUlOQUxfRU5BQkxFRCcsIGZhbHNlKTsNCiAgICAgICAgc3lwbmV4QVBJLnNob3dOb3RpZmljYXRpb24oJ1Rlcm1pbmFsIGhpZGRlbicsICdpbmZvJyk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgaW50ZWdyYXRlZFRlcm1pbmFsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOw0KICAgICAgICB0ZXJtaW5hbFRvZ2dsZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsNCiAgICAgICAgYXdhaXQgc3lwbmV4QVBJLnNldFNldHRpbmcoJ1RFUk1JTkFMX0VOQUJMRUQnLCB0cnVlKTsNCiAgICAgICAgdGVybWluYWxJbnB1dC5mb2N1cygpOw0KICAgICAgICBzeXBuZXhBUEkuc2hvd05vdGlmaWNhdGlvbignVGVybWluYWwgc2hvd24nLCAnaW5mbycpOw0KICAgIH0NCn0NCg0KLy8gSGFuZGxlIHRlcm1pbmFsIGlucHV0IGtleSBldmVudHMNCmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVRlcm1pbmFsS2V5RG93bihlKSB7DQogICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7DQogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgYXdhaXQgZXhlY3V0ZVRlcm1pbmFsQ29tbWFuZCgpOw0KICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykgew0KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIG5hdmlnYXRlVGVybWluYWxIaXN0b3J5KC0xKTsNCiAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnQXJyb3dEb3duJykgew0KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIG5hdmlnYXRlVGVybWluYWxIaXN0b3J5KDEpOw0KICAgIH0NCn0NCg0KLy8gRXhlY3V0ZSB0ZXJtaW5hbCBjb21tYW5kDQphc3luYyBmdW5jdGlvbiBleGVjdXRlVGVybWluYWxDb21tYW5kKCkgew0KICAgIGNvbnN0IGNvbW1hbmQgPSB0ZXJtaW5hbElucHV0LnZhbHVlLnRyaW0oKTsNCiAgICBpZiAoIWNvbW1hbmQpIHJldHVybjsNCiAgICANCiAgICAvLyBBZGQgY29tbWFuZCB0byBvdXRwdXQNCiAgICBhcHBlbmRUZXJtaW5hbE91dHB1dChgJCAke2NvbW1hbmR9YCwgJ3Rlcm1pbmFsLXN1Y2Nlc3MnKTsNCiAgICANCiAgICAvLyBBZGQgdG8gaGlzdG9yeQ0KICAgIGFkZFRvVGVybWluYWxIaXN0b3J5KGNvbW1hbmQpOw0KICAgIA0KICAgIC8vIENsZWFyIGlucHV0DQogICAgdGVybWluYWxJbnB1dC52YWx1ZSA9ICcnOw0KICAgIA0KICAgIHRyeSB7DQogICAgICAgIC8vIEV4ZWN1dGUgY29tbWFuZCB2aWEgU3lwbmV4QVBJDQogICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN5cG5leEFQSS5leGVjdXRlVGVybWluYWxDb21tYW5kKGNvbW1hbmQpOw0KICAgICAgICANCiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7DQogICAgICAgICAgICBpZiAocmVzdWx0Lm91dHB1dCkgew0KICAgICAgICAgICAgICAgIGFwcGVuZFRlcm1pbmFsT3V0cHV0KHJlc3VsdC5vdXRwdXQpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBhcHBlbmRUZXJtaW5hbE91dHB1dCgnQ29tbWFuZCBleGVjdXRlZCBzdWNjZXNzZnVsbHkgKG5vIG91dHB1dCknLCAndGVybWluYWwtaW5mbycpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgYXBwZW5kVGVybWluYWxPdXRwdXQoYEVycm9yOiAke3Jlc3VsdC5lcnJvcn1gLCAndGVybWluYWwtZXJyb3InKTsNCiAgICAgICAgfQ0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGFwcGVuZFRlcm1pbmFsT3V0cHV0KGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWAsICd0ZXJtaW5hbC1lcnJvcicpOw0KICAgIH0NCiAgICANCiAgICAvLyBBZGQgZW1wdHkgbGluZQ0KICAgIGFwcGVuZFRlcm1pbmFsT3V0cHV0KCcnKTsNCiAgICANCiAgICAvLyBGb2N1cyBpbnB1dCBmb3IgbmV4dCBjb21tYW5kDQogICAgdGVybWluYWxJbnB1dC5mb2N1cygpOw0KfQ0KDQovLyBBcHBlbmQgb3V0cHV0IHRvIHRlcm1pbmFsDQpmdW5jdGlvbiBhcHBlbmRUZXJtaW5hbE91dHB1dCh0ZXh0LCBjbGFzc05hbWUgPSAnJykgew0KICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICBsaW5lLmNsYXNzTmFtZSA9IGB0ZXJtaW5hbC1saW5lICR7Y2xhc3NOYW1lfWA7DQogICAgbGluZS50ZXh0Q29udGVudCA9IHRleHQ7DQogICAgdGVybWluYWxPdXRwdXQuYXBwZW5kQ2hpbGQobGluZSk7DQogICAgDQogICAgLy8gU2Nyb2xsIHRvIGJvdHRvbQ0KICAgIHRlcm1pbmFsT3V0cHV0LnNjcm9sbFRvcCA9IHRlcm1pbmFsT3V0cHV0LnNjcm9sbEhlaWdodDsNCn0NCg0KLy8gQWRkIGNvbW1hbmQgdG8gaGlzdG9yeQ0KZnVuY3Rpb24gYWRkVG9UZXJtaW5hbEhpc3RvcnkoY29tbWFuZCkgew0KICAgIC8vIERvbid0IGFkZCBlbXB0eSBjb21tYW5kcyBvciBkdXBsaWNhdGVzDQogICAgaWYgKCFjb21tYW5kLnRyaW0oKSB8fCAodGVybWluYWxIaXN0b3J5Lmxlbmd0aCA+IDAgJiYgdGVybWluYWxIaXN0b3J5W3Rlcm1pbmFsSGlzdG9yeS5sZW5ndGggLSAxXSA9PT0gY29tbWFuZCkpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICANCiAgICB0ZXJtaW5hbEhpc3RvcnkucHVzaChjb21tYW5kKTsNCiAgICB0ZXJtaW5hbEhpc3RvcnlJbmRleCA9IHRlcm1pbmFsSGlzdG9yeS5sZW5ndGg7DQogICAgDQogICAgLy8gS2VlcCBoaXN0b3J5IHNpemUgcmVhc29uYWJsZQ0KICAgIGlmICh0ZXJtaW5hbEhpc3RvcnkubGVuZ3RoID4gNTApIHsNCiAgICAgICAgdGVybWluYWxIaXN0b3J5LnNoaWZ0KCk7DQogICAgICAgIHRlcm1pbmFsSGlzdG9yeUluZGV4LS07DQogICAgfQ0KfQ0KDQovLyBOYXZpZ2F0ZSB0ZXJtaW5hbCBoaXN0b3J5DQpmdW5jdGlvbiBuYXZpZ2F0ZVRlcm1pbmFsSGlzdG9yeShkaXJlY3Rpb24pIHsNCiAgICBpZiAodGVybWluYWxIaXN0b3J5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuOw0KICAgIA0KICAgIGlmIChkaXJlY3Rpb24gPT09IC0xKSB7DQogICAgICAgIC8vIEdvIHVwIGluIGhpc3RvcnkNCiAgICAgICAgaWYgKHRlcm1pbmFsSGlzdG9yeUluZGV4ID4gMCkgew0KICAgICAgICAgICAgdGVybWluYWxIaXN0b3J5SW5kZXgtLTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgIC8vIEdvIGRvd24gaW4gaGlzdG9yeQ0KICAgICAgICBpZiAodGVybWluYWxIaXN0b3J5SW5kZXggPCB0ZXJtaW5hbEhpc3RvcnkubGVuZ3RoIC0gMSkgew0KICAgICAgICAgICAgdGVybWluYWxIaXN0b3J5SW5kZXgrKzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRlcm1pbmFsSGlzdG9yeUluZGV4ID0gdGVybWluYWxIaXN0b3J5Lmxlbmd0aDsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBpZiAodGVybWluYWxIaXN0b3J5SW5kZXggPj0gMCAmJiB0ZXJtaW5hbEhpc3RvcnlJbmRleCA8IHRlcm1pbmFsSGlzdG9yeS5sZW5ndGgpIHsNCiAgICAgICAgdGVybWluYWxJbnB1dC52YWx1ZSA9IHRlcm1pbmFsSGlzdG9yeVt0ZXJtaW5hbEhpc3RvcnlJbmRleF07DQogICAgfSBlbHNlIHsNCiAgICAgICAgdGVybWluYWxJbnB1dC52YWx1ZSA9ICcnOw0KICAgIH0NCiAgICANCiAgICAvLyBNb3ZlIGN1cnNvciB0byBlbmQNCiAgICB0ZXJtaW5hbElucHV0LnNldFNlbGVjdGlvblJhbmdlKHRlcm1pbmFsSW5wdXQudmFsdWUubGVuZ3RoLCB0ZXJtaW5hbElucHV0LnZhbHVlLmxlbmd0aCk7DQp9DQoNCi8vIEhhbmRsZSB0ZXJtaW5hbCBvdXRwdXQga2V5Ym9hcmQgc2hvcnRjdXRzDQpmdW5jdGlvbiBoYW5kbGVUZXJtaW5hbE91dHB1dEtleURvd24oZSkgew0KICAgIGlmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSB7DQogICAgICAgIGlmIChlLmtleSA9PT0gJ2MnKSB7DQogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7DQogICAgICAgICAgICBpZiAoc2VsZWN0aW9uLnRvU3RyaW5nKCkpIHsNCiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChzZWxlY3Rpb24udG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIENvcHkgYWxsIHRlcm1pbmFsIG91dHB1dCBpZiBub3RoaW5nIGlzIHNlbGVjdGVkDQogICAgICAgICAgICAgICAgY29uc3QgYWxsVGV4dCA9IHRlcm1pbmFsT3V0cHV0LmlubmVyVGV4dCB8fCB0ZXJtaW5hbE91dHB1dC50ZXh0Q29udGVudDsNCiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChhbGxUZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ2EnKSB7DQogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBjb25zdCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7DQogICAgICAgICAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHModGVybWluYWxPdXRwdXQpOw0KICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOw0KICAgICAgICAgICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpOw0KICAgICAgICAgICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KLy8gQ29ubmVjdCB0byBXZWJTb2NrZXQgZm9yIHJlYWwtdGltZSB0ZXJtaW5hbCBvdXRwdXQNCmFzeW5jIGZ1bmN0aW9uIGNvbm5lY3RUZXJtaW5hbFdlYlNvY2tldCgpIHsNCiAgICB0cnkgew0KICAgICAgICAvLyBDb25uZWN0IHRvIFdlYlNvY2tldA0KICAgICAgICBhd2FpdCBzeXBuZXhBUEkuY29ubmVjdFNvY2tldCgpOw0KICAgICAgICANCiAgICAgICAgLy8gSm9pbiB0ZXJtaW5hbCByb29tDQogICAgICAgIHN5cG5leEFQSS5qb2luUm9vbSgndGVybWluYWwnKTsNCiAgICAgICAgDQogICAgICAgIC8vIExpc3RlbiBmb3IgdGVybWluYWwgb3V0cHV0DQogICAgICAgIHN5cG5leEFQSS5vbigndGVybWluYWxfb3V0cHV0JywgKGRhdGEpID0+IHsNCiAgICAgICAgICAgIGhhbmRsZVRlcm1pbmFsV2ViU29ja2V0T3V0cHV0KGRhdGEpOw0KICAgICAgICB9KTsNCiAgICAgICAgDQogICAgICAgIGNvbnNvbGUubG9nKCdUZXJtaW5hbCBXZWJTb2NrZXQgY29ubmVjdGVkJyk7DQogICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNvbm5lY3QgdGVybWluYWwgV2ViU29ja2V0OicsIGVycm9yKTsNCiAgICB9DQp9DQoNCi8vIEhhbmRsZSBXZWJTb2NrZXQgdGVybWluYWwgb3V0cHV0DQpmdW5jdGlvbiBoYW5kbGVUZXJtaW5hbFdlYlNvY2tldE91dHB1dChkYXRhKSB7DQogICAgY29uc3QgeyBvdXRwdXQsIHR5cGUgfSA9IGRhdGE7DQogICAgDQogICAgLy8gRGV0ZXJtaW5lIG91dHB1dCBjbGFzcyBiYXNlZCBvbiB0eXBlDQogICAgbGV0IGNsYXNzTmFtZSA9ICcnOw0KICAgIGlmICh0eXBlID09PSAnc3RkZXJyJykgew0KICAgICAgICBjbGFzc05hbWUgPSAndGVybWluYWwtZXJyb3InOw0KICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2NvbXBsZXRpb24nKSB7DQogICAgICAgIGNsYXNzTmFtZSA9ICd0ZXJtaW5hbC1pbmZvJzsNCiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdlcnJvcicpIHsNCiAgICAgICAgY2xhc3NOYW1lID0gJ3Rlcm1pbmFsLWVycm9yJzsNCiAgICB9DQogICAgDQogICAgLy8gQXBwZW5kIHRoZSBvdXRwdXQNCiAgICBhcHBlbmRUZXJtaW5hbE91dHB1dChvdXRwdXQsIGNsYXNzTmFtZSk7DQp9DQoNCi8vIFRlcm1pbmFsIHJlc2l6ZSBmdW5jdGlvbmFsaXR5DQpmdW5jdGlvbiBzdGFydFRlcm1pbmFsUmVzaXplKGUpIHsNCiAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgDQogICAgY29uc3Qgc3RhcnRZID0gZS5jbGllbnRZOw0KICAgIGNvbnN0IHN0YXJ0SGVpZ2h0ID0gaW50ZWdyYXRlZFRlcm1pbmFsLm9mZnNldEhlaWdodDsNCiAgICANCiAgICBmdW5jdGlvbiBvbk1vdXNlTW92ZShlKSB7DQogICAgICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIHN0YXJ0WTsNCiAgICAgICAgY29uc3QgbmV3SGVpZ2h0ID0gTWF0aC5tYXgoMjAwLCBNYXRoLm1pbig2MDAsIHN0YXJ0SGVpZ2h0ICsgZGVsdGFZKSk7DQogICAgICAgIGludGVncmF0ZWRUZXJtaW5hbC5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQgKyAncHgnOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBvbk1vdXNlVXAoKSB7DQogICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTsNCiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7DQogICAgfQ0KICAgIA0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTsNCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwKTsNCn0NCg0KLy8gSW5pdGlhbGl6ZSB0ZXJtaW5hbCB3aGVuIHRleHQgZWRpdG9yIGlzIHJlYWR5DQpmdW5jdGlvbiBpbml0VGV4dEVkaXRvcldpdGhUZXJtaW5hbCgpIHsNCiAgICBpbml0VGV4dEVkaXRvcigpOw0KICAgIGluaXRJbnRlZ3JhdGVkVGVybWluYWwoKTsNCn0NCg0KLy8gU2V0IHVwIGV2ZW50IGhhbmRsZXJzDQpmdW5jdGlvbiBzZXR1cEV2ZW50SGFuZGxlcnMoKSB7DQogICAgLy8gQnV0dG9uIGV2ZW50cw0KICAgIG5ld0ZpbGVCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlTmV3RmlsZSk7DQogICAgbG9hZEZpbGVCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbG9hZEZpbGUpOw0KICAgIHNhdmVGaWxlQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNhdmVGaWxlKTsNCiAgICBzYXZlQXNGaWxlQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNhdmVBc0ZpbGUpOw0KICAgIHdvcmRXcmFwVG9nZ2xlPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVdvcmRXcmFwKTsNCiAgICBsaW5lTnVtYmVyc1RvZ2dsZT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVMaW5lTnVtYmVycyk7DQogICAgc3ludGF4SGlnaGxpZ2h0aW5nVG9nZ2xlPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVN5bnRheEhpZ2hsaWdodGluZyk7DQogICAgdmFsaWRhdGlvblRvZ2dsZT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVWYWxpZGF0aW9uKTsNCiAgICANCiAgICAvLyBUZXh0YXJlYSBldmVudHMNCiAgICB0ZXh0RWRpdG9yLnRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaGFuZGxlVGV4dENoYW5nZSk7DQogICAgdGV4dEVkaXRvci50ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzeW5jU2Nyb2xsKTsNCiAgICB0ZXh0RWRpdG9yLnRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTsNCiAgICANCg0KICAgIA0KICAgIC8vIFdpbmRvdyBldmVudHMNCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgaGFuZGxlQmVmb3JlVW5sb2FkKTsNCn0NCg0KDQoNCi8vIEhhbmRsZSBrZXlib2FyZCBzaG9ydGN1dHMNCmZ1bmN0aW9uIGhhbmRsZUtleURvd24oZSkgew0KICAgIC8vIEN0cmwvQ21kICsgUzogU2F2ZQ0KICAgIGlmICgoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkgJiYgZS5rZXkgPT09ICdzJyAmJiAhZS5zaGlmdEtleSkgew0KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIHNhdmVGaWxlKCk7DQogICAgfQ0KICAgIA0KICAgIC8vIEN0cmwvQ21kICsgU2hpZnQgKyBTOiBTYXZlIEFzDQogICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiBlLnNoaWZ0S2V5ICYmIGUua2V5ID09PSAnUycpIHsNCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICBzYXZlQXNGaWxlKCk7DQogICAgfQ0KICAgIA0KICAgIC8vIEN0cmwvQ21kICsgTjogTmV3IGZpbGUNCiAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIGUua2V5ID09PSAnbicpIHsNCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICBjcmVhdGVOZXdGaWxlKCk7DQogICAgfQ0KICAgIA0KICAgIC8vIEN0cmwvQ21kICsgTzogTG9hZCBmaWxlDQogICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiBlLmtleSA9PT0gJ28nKSB7DQogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgbG9hZEZpbGUoKTsNCiAgICB9DQogICAgDQogICAgLy8gQ3RybC9DbWQgKyBTaGlmdCArIFY6IEZvcmNlIHZhbGlkYXRpb24NCiAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIGUuc2hpZnRLZXkgJiYgZS5rZXkgPT09ICdWJykgew0KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIE1hbnVhbCB2YWxpZGF0aW9uIHRyaWdnZXJlZCcpOw0KICAgICAgICBpZiAoaXNQeXRob25GaWxlKHRleHRFZGl0b3IuZmlsZVBhdGgpKSB7DQogICAgICAgICAgICBzY2hlZHVsZVZhbGlkYXRpb24oKTsNCiAgICAgICAgICAgIHN5cG5leEFQSS5zaG93Tm90aWZpY2F0aW9uKCdWYWxpZGF0aW9uIHRyaWdnZXJlZCBtYW51YWxseScsICdpbmZvJyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBzeXBuZXhBUEkuc2hvd05vdGlmaWNhdGlvbignTm90IGEgUHl0aG9uIGZpbGUnLCAnd2FybmluZycpOw0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vIFRhYiBoYW5kbGluZw0KICAgIGlmIChlLmtleSA9PT0gJ1RhYicpIHsNCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICBjb25zdCBzdGFydCA9IHRleHRFZGl0b3IudGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQ7DQogICAgICAgIGNvbnN0IGVuZCA9IHRleHRFZGl0b3IudGV4dGFyZWEuc2VsZWN0aW9uRW5kOw0KICAgICAgICBjb25zdCBzcGFjZXMgPSAnICcucmVwZWF0KHRleHRFZGl0b3Iuc2V0dGluZ3MudGFiU2l6ZSk7DQogICAgICAgIA0KICAgICAgICB0ZXh0RWRpdG9yLnRleHRhcmVhLnZhbHVlID0gDQogICAgICAgICAgICB0ZXh0RWRpdG9yLnRleHRhcmVhLnZhbHVlLnN1YnN0cmluZygwLCBzdGFydCkgKyANCiAgICAgICAgICAgIHNwYWNlcyArIA0KICAgICAgICAgICAgdGV4dEVkaXRvci50ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcoZW5kKTsNCiAgICAgICAgDQogICAgICAgIHRleHRFZGl0b3IudGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQgPSB0ZXh0RWRpdG9yLnRleHRhcmVhLnNlbGVjdGlvbkVuZCA9IHN0YXJ0ICsgc3BhY2VzLmxlbmd0aDsNCiAgICAgICAgDQogICAgICAgIC8vIE1hbnVhbGx5IHRyaWdnZXIgY29udGVudCB1cGRhdGUgc2luY2Ugd2UgcHJldmVudGVkIHRoZSBkZWZhdWx0DQogICAgICAgIHVwZGF0ZUxpbmVOdW1iZXJzKCk7DQogICAgICAgIG1hcmtBc01vZGlmaWVkKCk7DQogICAgICAgIGlmICh0ZXh0RWRpdG9yLnN5bnRheEhpZ2hsaWdodGluZ0VuYWJsZWQpIHsNCiAgICAgICAgICAgIHVwZGF0ZUhpZ2hsaWdodGVkQ29udGVudCgpOw0KICAgICAgICB9DQogICAgICAgIHNjaGVkdWxlVmFsaWRhdGlvbigpOw0KICAgIH0NCn0NCg0KDQovLyBUb2dnbGUgd29yZCB3cmFwDQpmdW5jdGlvbiB0b2dnbGVXb3JkV3JhcCgpIHsNCiAgICB0ZXh0RWRpdG9yLndvcmRXcmFwRW5hYmxlZCA9ICF0ZXh0RWRpdG9yLndvcmRXcmFwRW5hYmxlZDsNCiAgICB0ZXh0RWRpdG9yLnRleHRhcmVhLmNsYXNzTGlzdC50b2dnbGUoJ3dvcmQtd3JhcCcsIHRleHRFZGl0b3Iud29yZFdyYXBFbmFibGVkKTsNCiAgICANCiAgICAvLyBVcGRhdGUgaGlnaGxpZ2h0ZWQgZWRpdG9yIGlmIGl0IGV4aXN0cw0KICAgIGlmICh0ZXh0RWRpdG9yLmhpZ2hsaWdodGVkRWRpdG9yKSB7DQogICAgICAgIHRleHRFZGl0b3IuaGlnaGxpZ2h0ZWRFZGl0b3Iuc3R5bGUud29yZFdyYXAgPSB0ZXh0RWRpdG9yLndvcmRXcmFwRW5hYmxlZCA/ICdicmVhay13b3JkJyA6ICdub3JtYWwnOw0KICAgIH0NCiAgICANCiAgICBpZiAod29yZFdyYXBUb2dnbGUpIHsNCiAgICAgICAgd29yZFdyYXBUb2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgdGV4dEVkaXRvci53b3JkV3JhcEVuYWJsZWQpOw0KICAgIH0NCiAgICANCiAgICBzeXBuZXhBUEkuc2hvd05vdGlmaWNhdGlvbigNCiAgICAgICAgYFdvcmQgd3JhcCAke3RleHRFZGl0b3Iud29yZFdyYXBFbmFibGVkID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJ31gLA0KICAgICAgICAnaW5mbycNCiAgICApOw0KfQ0KDQovLyBUb2dnbGUgbGluZSBudW1iZXJzDQpmdW5jdGlvbiB0b2dnbGVMaW5lTnVtYmVycygpIHsNCiAgICB0ZXh0RWRpdG9yLmxpbmVOdW1iZXJzRW5hYmxlZCA9ICF0ZXh0RWRpdG9yLmxpbmVOdW1iZXJzRW5hYmxlZDsNCiAgICB0ZXh0RWRpdG9yLmxpbmVOdW1iZXJzLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsICF0ZXh0RWRpdG9yLmxpbmVOdW1iZXJzRW5hYmxlZCk7DQogICAgDQogICAgaWYgKGxpbmVOdW1iZXJzVG9nZ2xlKSB7DQogICAgICAgIGxpbmVOdW1iZXJzVG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIHRleHRFZGl0b3IubGluZU51bWJlcnNFbmFibGVkKTsNCiAgICB9DQogICAgDQogICAgaWYgKHRleHRFZGl0b3IubGluZU51bWJlcnNFbmFibGVkKSB7DQogICAgICAgIHVwZGF0ZUxpbmVOdW1iZXJzKCk7DQogICAgfQ0KICAgIA0KICAgIHN5cG5leEFQSS5zaG93Tm90aWZpY2F0aW9uKA0KICAgICAgICBgTGluZSBudW1iZXJzICR7dGV4dEVkaXRvci5saW5lTnVtYmVyc0VuYWJsZWQgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnfWAsDQogICAgICAgICdpbmZvJw0KICAgICk7DQp9DQoNCg0KLy8gVG9nZ2xlIGNvZGUgdmFsaWRhdGlvbg0KYXN5bmMgZnVuY3Rpb24gdG9nZ2xlVmFsaWRhdGlvbigpIHsNCiAgICB0ZXh0RWRpdG9yLnZhbGlkYXRpb25FbmFibGVkID0gIXRleHRFZGl0b3IudmFsaWRhdGlvbkVuYWJsZWQ7DQogICAgDQogICAgLy8gU2F2ZSBzZXR0aW5nDQogICAgdHJ5IHsNCiAgICAgICAgYXdhaXQgc3lwbmV4QVBJLnNldFNldHRpbmcoJ0NPREVfVkFMSURBVElPTicsIHRleHRFZGl0b3IudmFsaWRhdGlvbkVuYWJsZWQpOw0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIHZhbGlkYXRpb24gc2V0dGluZzonLCBlcnJvcik7DQogICAgfQ0KICAgIA0KICAgIC8vIFVwZGF0ZSBVSQ0KICAgIGlmICh2YWxpZGF0aW9uVG9nZ2xlKSB7DQogICAgICAgIHZhbGlkYXRpb25Ub2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgdGV4dEVkaXRvci52YWxpZGF0aW9uRW5hYmxlZCk7DQogICAgfQ0KICAgIA0KICAgIC8vIEFwcGx5IHZhbGlkYXRpb24gaWYgZW5hYmxlZCwgb3RoZXJ3aXNlIGNsZWFyIGVycm9ycw0KICAgIGlmICh0ZXh0RWRpdG9yLnZhbGlkYXRpb25FbmFibGVkKSB7DQogICAgICAgIHNjaGVkdWxlVmFsaWRhdGlvbigpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIGNsZWFyRXJyb3JNYXJrZXJzKCk7DQogICAgICAgIHVwZGF0ZUVycm9yQ291bnQoMCk7DQogICAgfQ0KICAgIA0KICAgIHN5cG5leEFQSS5zaG93Tm90aWZpY2F0aW9uKA0KICAgICAgICBgQ29kZSB2YWxpZGF0aW9uICR7dGV4dEVkaXRvci52YWxpZGF0aW9uRW5hYmxlZCA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9YCwNCiAgICAgICAgJ2luZm8nDQogICAgKTsNCn0NCg0KDQovLyBIYW5kbGUgYmVmb3JlIHVubG9hZA0KZnVuY3Rpb24gaGFuZGxlQmVmb3JlVW5sb2FkKGUpIHsNCiAgICBpZiAodGV4dEVkaXRvci5pc01vZGlmaWVkKSB7DQogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9ICdZb3UgaGF2ZSB1bnNhdmVkIGNoYW5nZXMuIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBsZWF2ZT8nOw0KICAgICAgICByZXR1cm4gZS5yZXR1cm5WYWx1ZTsNCiAgICB9DQp9DQoNCg0KLy8gVGV4dCBFZGl0b3IgQXBwDQpjb25zb2xlLmxvZygnVGV4dCBFZGl0b3IgYXBwIGxvYWRpbmcuLi4nKTsNCmNvbnNvbGUubG9nKCdEb2N1bWVudCByZWFkeSBzdGF0ZTonLCBkb2N1bWVudC5yZWFkeVN0YXRlKTsNCmNvbnNvbGUubG9nKCdEb2N1bWVudCBib2R5OicsIGRvY3VtZW50LmJvZHkpOw0KY29uc29sZS5sb2coJ1dpbmRvdyBzeXBuZXhBUEk6JywgdHlwZW9mIHdpbmRvdy5zeXBuZXhBUEkpOw0KDQovLyBHbG9iYWwgdmFyaWFibGVzDQpsZXQgdGV4dEVkaXRvciA9IHsNCiAgICB0ZXh0YXJlYTogbnVsbCwNCiAgICBsaW5lTnVtYmVyczogbnVsbCwNCiAgICBmaWxlUGF0aDogbnVsbCwNCiAgICBvcmlnaW5hbENvbnRlbnQ6ICcnLA0KICAgIGlzTW9kaWZpZWQ6IGZhbHNlLA0KICAgIGF1dG9TYXZlSW50ZXJ2YWw6IG51bGwsDQogICAgd29yZFdyYXBFbmFibGVkOiBmYWxzZSwNCiAgICBsaW5lTnVtYmVyc0VuYWJsZWQ6IHRydWUsDQogICAgc2V0dGluZ3M6IHt9LA0KICAgIC8vIFN5bnRheCBoaWdobGlnaHRpbmcNCiAgICBwcmlzbUxvYWRlZDogZmFsc2UsDQogICAgc3ludGF4SGlnaGxpZ2h0aW5nRW5hYmxlZDogZmFsc2UsDQogICAgaGlnaGxpZ2h0ZWRFZGl0b3I6IG51bGwsDQogICAgaGlnaGxpZ2h0Q29udGFpbmVyOiBudWxsLA0KICAgIG9yaWdpbmFsVGV4dGFyZWFTdHlsZXM6IG51bGwsDQogICAgZGVib3VuY2VUaW1lcjogbnVsbCwNCiAgICAvLyBDdXJzb3IgcG9zaXRpb24gdHJhY2tpbmcNCiAgICBjdXJzb3JQb3NpdGlvbjogMCwNCiAgICAvLyBDb2RlIHZhbGlkYXRpb24NCiAgICBweW9kaWRlTG9hZGVkOiBmYWxzZSwNCiAgICB2YWxpZGF0aW9uRW5hYmxlZDogdHJ1ZSwNCiAgICB2YWxpZGF0aW9uRGVib3VuY2VUaW1lcjogbnVsbCwNCiAgICBjdXJyZW50RXJyb3JzOiBbXSwNCiAgICBlcnJvck1hcmtlcnM6IFtdDQp9Ow0KDQovLyBET00gZWxlbWVudHMNCmxldCBuZXdGaWxlQnRuLCBsb2FkRmlsZUJ0biwgc2F2ZUZpbGVCdG4sIHNhdmVBc0ZpbGVCdG47DQpsZXQgY3VycmVudEZpbGVuYW1lRWwsIHdvcmRXcmFwVG9nZ2xlLCBsaW5lTnVtYmVyc1RvZ2dsZSwgc3ludGF4SGlnaGxpZ2h0aW5nVG9nZ2xlLCB2YWxpZGF0aW9uVG9nZ2xlOw0KbGV0IG1vZGlmaWVkU3RhdHVzRWwsIGVycm9yQ291bnRFbDsNCg0KLy8gSW5pdGlhbGl6ZSB3aGVuIERPTSBpcyByZWFkeQ0KZnVuY3Rpb24gaW5pdFRleHRFZGl0b3IoKSB7DQogICAgY29uc29sZS5sb2coJ1RleHQgRWRpdG9yIGluaXRpYWxpemluZy4uLicpOw0KICAgIA0KICAgIC8vIENoZWNrIGlmIFN5cG5leEFQSSBpcyBhdmFpbGFibGUNCiAgICBpZiAodHlwZW9mIHN5cG5leEFQSSA9PT0gJ3VuZGVmaW5lZCcgfHwgIXN5cG5leEFQSSkgew0KICAgICAgICBjb25zb2xlLndhcm4oJ1N5cG5leEFQSSBub3QgYXZhaWxhYmxlIC0gcnVubmluZyBpbiBzdGFuZGFsb25lIG1vZGUnKTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGNvbnNvbGUubG9nKCdTeXBuZXhBUEkgYXZhaWxhYmxlOicsIHN5cG5leEFQSSk7DQogICAgY29uc29sZS5sb2coJ0FwcCBJRDonLCBzeXBuZXhBUEkuZ2V0QXBwSWQoKSk7DQogICAgDQogICAgLy8gVGVzdCBpZiBhcHAgY29udGFpbmVyIGV4aXN0cw0KICAgIGNvbnN0IGFwcENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHAtY29udGFpbmVyJyk7DQogICAgY29uc29sZS5sb2coJ0FwcCBjb250YWluZXIgZm91bmQ6JywgISFhcHBDb250YWluZXIpOw0KICAgIGlmIChhcHBDb250YWluZXIpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ0FwcCBjb250YWluZXIgY29udGVudDonLCBhcHBDb250YWluZXIuaW5uZXJIVE1MLnN1YnN0cmluZygwLCAyMDApICsgJy4uLicpOw0KICAgIH0NCiAgICANCiAgICAvLyBHZXQgRE9NIGVsZW1lbnRzDQogICAgdGV4dEVkaXRvci50ZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0LWVkaXRvcicpOw0KICAgIHRleHRFZGl0b3IubGluZU51bWJlcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZS1udW1iZXJzJyk7DQogICAgDQogICAgbmV3RmlsZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctZmlsZScpOw0KICAgIGxvYWRGaWxlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWQtZmlsZScpOw0KICAgIHNhdmVGaWxlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtZmlsZScpOw0KICAgIHNhdmVBc0ZpbGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS1hcy1maWxlJyk7DQogICAgY3VycmVudEZpbGVuYW1lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudC1maWxlbmFtZScpOw0KICAgIHdvcmRXcmFwVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dvcmQtd3JhcC10b2dnbGUnKTsNCiAgICBsaW5lTnVtYmVyc1RvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lLW51bWJlcnMtdG9nZ2xlJyk7DQogICAgc3ludGF4SGlnaGxpZ2h0aW5nVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N5bnRheC1oaWdobGlnaHRpbmctdG9nZ2xlJyk7DQogICAgdmFsaWRhdGlvblRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YWxpZGF0aW9uLXRvZ2dsZScpOw0KICAgIA0KICAgIG1vZGlmaWVkU3RhdHVzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kaWZpZWQtc3RhdHVzJyk7DQogICAgZXJyb3JDb3VudEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yLWNvdW50Jyk7DQogICAgDQogICAgLy8gQ3JpdGljYWwgZWxlbWVudCBjaGVja3MNCiAgICBpZiAoIXRleHRFZGl0b3IudGV4dGFyZWEpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcignVGV4dCBlZGl0b3IgdGV4dGFyZWEgbm90IGZvdW5kJyk7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgDQogICAgaWYgKCF0ZXh0RWRpdG9yLmxpbmVOdW1iZXJzKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0xpbmUgbnVtYmVycyBlbGVtZW50IG5vdCBmb3VuZCcpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIA0KICAgIGNvbnNvbGUubG9nKCdET00gZWxlbWVudHMgZm91bmQ6Jywgew0KICAgICAgICB0ZXh0YXJlYTogISF0ZXh0RWRpdG9yLnRleHRhcmVhLA0KICAgICAgICBsaW5lTnVtYmVyczogISF0ZXh0RWRpdG9yLmxpbmVOdW1iZXJzLA0KICAgICAgICBuZXdGaWxlQnRuOiAhIW5ld0ZpbGVCdG4sDQogICAgICAgIGxvYWRGaWxlQnRuOiAhIWxvYWRGaWxlQnRuLA0KICAgICAgICBzYXZlRmlsZUJ0bjogISFzYXZlRmlsZUJ0biwNCiAgICAgICAgc2F2ZUFzRmlsZUJ0bjogISFzYXZlQXNGaWxlQnRuLA0KICAgICAgICBjdXJyZW50RmlsZW5hbWVFbDogISFjdXJyZW50RmlsZW5hbWVFbCwNCiAgICAgICAgc3ludGF4SGlnaGxpZ2h0aW5nVG9nZ2xlOiAhIXN5bnRheEhpZ2hsaWdodGluZ1RvZ2dsZSwNCiAgICAgICAgbW9kaWZpZWRTdGF0dXNFbDogISFtb2RpZmllZFN0YXR1c0VsDQogICAgfSk7DQogICAgDQogICAgLy8gTG9hZCBzZXR0aW5ncw0KICAgIGxvYWRTZXR0aW5ncygpOw0KICAgIA0KICAgIC8vIExvYWQgdGVybWluYWwgc3RhdGUNCiAgICBsb2FkVGVybWluYWxTdGF0ZSgpOw0KICAgIA0KICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycw0KICAgIHNldHVwRXZlbnRIYW5kbGVycygpOw0KICAgIA0KICAgIC8vIEluaXRpYWxpemUgZWRpdG9yIHN0YXRlDQogICAgaW5pdGlhbGl6ZUVkaXRvcigpOw0KICAgIA0KICAgIC8vIFNldCBpbml0aWFsIGJ1dHRvbiBzdGF0ZXMNCiAgICBpZiAoc3ludGF4SGlnaGxpZ2h0aW5nVG9nZ2xlKSB7DQogICAgICAgIHN5bnRheEhpZ2hsaWdodGluZ1RvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCB0ZXh0RWRpdG9yLnNldHRpbmdzLnN5bnRheEhpZ2hsaWdodGluZyk7DQogICAgfQ0KICAgIGlmICh2YWxpZGF0aW9uVG9nZ2xlKSB7DQogICAgICAgIHZhbGlkYXRpb25Ub2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgdGV4dEVkaXRvci52YWxpZGF0aW9uRW5hYmxlZCk7DQogICAgfQ0KICAgIA0KICAgIC8vIFRleHQgRWRpdG9yIGxvYWRlZCBzdWNjZXNzZnVsbHkgKG5vIG5vdGlmaWNhdGlvbiBuZWVkZWQpDQogICAgDQogICAgY29uc29sZS5sb2coJ1RleHQgRWRpdG9yIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlJyk7DQp9DQoNCg0KDQpjb25zb2xlLmxvZygnVGV4dCBFZGl0b3Igc2NyaXB0IGxvYWRlZCcpOw0KY29uc29sZS5sb2coJz09PSBURVhUIEVESVRPUiBERUJVRyBJTkZPID09PScpOw0KY29uc29sZS5sb2coJ0RvY3VtZW50IHJlYWR5IHN0YXRlOicsIGRvY3VtZW50LnJlYWR5U3RhdGUpOw0KY29uc29sZS5sb2coJ0RvY3VtZW50IGJvZHkgZXhpc3RzOicsICEhZG9jdW1lbnQuYm9keSk7DQpjb25zb2xlLmxvZygnV2luZG93IHN5cG5leEFQSSB0eXBlOicsIHR5cGVvZiB3aW5kb3cuc3lwbmV4QVBJKTsNCmNvbnNvbGUubG9nKCdHbG9iYWwgc3lwbmV4QVBJIHR5cGU6JywgdHlwZW9mIHN5cG5leEFQSSk7DQpjb25zb2xlLmxvZygnQXBwIGNvbnRhaW5lciBleGlzdHM6JywgISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwLWNvbnRhaW5lcicpKTsNCmNvbnNvbGUubG9nKCdUZXh0IGVkaXRvciB0ZXh0YXJlYSBleGlzdHM6JywgISFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGV4dC1lZGl0b3InKSk7DQpjb25zb2xlLmxvZygnTGluZSBudW1iZXJzIGV4aXN0czonLCAhIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lLW51bWJlcnMnKSk7DQpjb25zb2xlLmxvZygnPT09IEVORCBERUJVRyBJTkZPID09PScpOw0KDQoNCg0KLy8gUmVwbGFjZSB0aGUgb3JpZ2luYWwgaW5pdFRleHRFZGl0b3IgY2FsbA0KaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykgew0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0VGV4dEVkaXRvcldpdGhUZXJtaW5hbCk7DQp9IGVsc2Ugew0KICAgIC8vIERPTSBpcyBhbHJlYWR5IGxvYWRlZA0KICAgIGluaXRUZXh0RWRpdG9yV2l0aFRlcm1pbmFsKCk7DQp9IDwvc2NyaXB0Pg=="
  },
  "package_info": {
    "format_version": "1.0",
    "created_at": "2025-07-22T01:21:33.164002",
    "packaged_by": "Sypnex OS App Packager",
    "source_directory": ".\\text_editor"
  }
}